---

title: Xml Parser


keywords: fastai
sidebar: home_sidebar

summary: "This parser contains functions to extract data from vasprun.xml. All functions in xml parser can work without arguments if working directory contains `vasprun.xml`."
description: "This parser contains functions to extract data from vasprun.xml. All functions in xml parser can work without arguments if working directory contains `vasprun.xml`."
nb_path: "XmlElementTree.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: XmlElementTree.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li>Almost every object in this module returns a <a href="/pivotpy/XmlElementTree.html#Dict2Data"><code>Dict2Data</code></a> object with attributes accessible via dot notation. This object can by transformed to a dictionary by <code>to_dict()</code> method on the object.</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Dict2Data" class="doc_header"><code>class</code> <code>Dict2Data</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/vr_parser.py#L9" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Dict2Data</code>(<strong><code>d</code></strong>) :: <code>dict</code></p>
</blockquote>
<ul>
<li>Returns a Data object with dictionary keys as attributes of Data accessible by dot notation.</li>
<li><strong>Parmeters</strong><ul>
<li>dict : Python dictionary (nested as well) containing any python data types.</li>
</ul>
</li>
<li><strong>Attributes</strong><ul>
<li>to_dict() : Converts a Data object to dictionary if it could be made a dictionary, otherwise throws relevant error.</li>
</ul>
</li>
<li><strong>Example</strong><blockquote><p>x = Dict2Data({'A':1,'B':{'C':2}})
x
Data(
    A = 1
    B = Data(
        C = 2
        )
    )
x.B.to_dict()
{'C': 2}</p>
</blockquote>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Parser-Functions">Parser Functions<a class="anchor-link" href="#Parser-Functions"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="read_asxml" class="doc_header"><code>read_asxml</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/vr_parser.py#L70" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>read_asxml</code>(<strong><code>path</code></strong>=<em><code>None</code></em>, <strong><code>suppress_warning</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<ul>
<li><p>Reads a big vasprun.xml file into memory once and then apply commands.
If current folder contains <code>vasprun.xml</code> file, it automatically picks it.</p>
</li>
<li><p><strong>Parameters</strong></p>
<ul>
<li>path             : Path/To/vasprun.xml</li>
<li>suppress_warning : False by defualt. Warns about memory usage for large files &gt; 100 MB.</li>
</ul>
</li>
<li><strong>Returns</strong><ul>
<li>xml_data : Xml object to use in other functions</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="exclude_kpts" class="doc_header"><code>exclude_kpts</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/vr_parser.py#L120" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>exclude_kpts</code>(<strong><code>xml_data</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<ul>
<li>Returns number of kpoints to exclude used from IBZKPT.</li>
<li><strong>Parameters</strong><ul>
<li>xml_data : From <a href="/pivotpy/XmlElementTree.html#read_asxml"><code>read_asxml</code></a> function</li>
</ul>
</li>
<li><strong>Returns</strong><ul>
<li>int      : Number of kpoints to exclude.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_ispin" class="doc_header"><code>get_ispin</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/vr_parser.py#L141" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_ispin</code>(<strong><code>xml_data</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<ul>
<li>Returns value of ISPIN.</li>
<li><strong>Parameters</strong><ul>
<li>xml_data : From <a href="/pivotpy/XmlElementTree.html#read_asxml"><code>read_asxml</code></a> function</li>
</ul>
</li>
<li><strong>Returns</strong><ul>
<li>int      : Value of ISPIN.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_summary" class="doc_header"><code>get_summary</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/vr_parser.py#L158" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_summary</code>(<strong><code>xml_data</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<ul>
<li>Returns overview of system parameters.</li>
<li><strong>Parameters</strong><ul>
<li>xml_data : From <a href="/pivotpy/XmlElementTree.html#read_asxml"><code>read_asxml</code></a> function</li>
</ul>
</li>
<li><strong>Returns</strong><ul>
<li>Data     : pivotpy.Dict2Data with attibutes accessible via dot notation.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pivotpy.vr_parser</span> <span class="k">as</span> <span class="nn">vp</span>
<span class="n">xml_data</span><span class="o">=</span><span class="n">vp</span><span class="o">.</span><span class="n">read_asxml</span><span class="p">(</span><span class="n">path</span><span class="o">=</span> <span class="s1">&#39;../vasprun.xml&#39;</span><span class="p">)</span>
<span class="n">get_summary</span><span class="p">(</span><span class="n">xml_data</span><span class="o">=</span><span class="n">xml_data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-green-intense-fg"> 
      successful!
</span>
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Data(
    SYSTEM = AlAs
    NION = 2
    TypeION = 2
    ElemName = [&#39;Al&#39;, &#39;As&#39;]
    ElemIndex = [0, 1, 2]
    E_Fermi = 3.72526782
    ISPIN = 1
    fields = [&#39;s&#39;, &#39;py&#39;, &#39;pz&#39;, &#39;px&#39;, &#39;dxy&#39;, &#39;dyz&#39;, &#39;dz2&#39;, &#39;dxz&#39;, &#39;x2-y2&#39;]
    incar = Data(
        SYSTEM = AlAs
        PREC = high
        ALGO = N
        NELMIN = 7
        EDIFF = 0.00000100
        ISMEAR = 0
        SIGMA = 0.10000000
        LORBIT = 11
        KPOINT_BSE = -1     0     0     0
        LHFCALC = T
        HFSCREEN = 0.20100000
        PRECFOCK = fast
    )
)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_kpts" class="doc_header"><code>get_kpts</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/vr_parser.py#L196" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_kpts</code>(<strong><code>xml_data</code></strong>=<em><code>None</code></em>, <strong><code>skipk</code></strong>=<em><code>0</code></em>, <strong><code>joinPathAt</code></strong>=<em><code>[]</code></em>)</p>
</blockquote>
<ul>
<li>Returns kpoints and calculated kpath.</li>
<li><strong>Parameters</strong><ul>
<li>xml_data   : From <a href="/pivotpy/XmlElementTree.html#read_asxml"><code>read_asxml</code></a> function</li>
<li>skipk      : Number of initil kpoints to skip</li>
<li>joinPathAt : List of indices of kpoints where path is broken</li>
</ul>
</li>
<li><strong>Returns</strong><ul>
<li>Data     : pivotpy.Dict2Data with attibutes <code>kpath</code> and <code>kpoints</code></li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_kpts</span><span class="p">(</span><span class="n">xml_data</span><span class="o">=</span><span class="n">xml_data</span><span class="p">,</span><span class="n">skipk</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Data(
    NKPTS = 126
    kpoints = &lt;ndarray:shape=(126, 3)&gt;
    kpath = &lt;list:len=126&gt;
)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_tdos" class="doc_header"><code>get_tdos</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/vr_parser.py#L230" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_tdos</code>(<strong><code>xml_data</code></strong>=<em><code>None</code></em>, <strong><code>spin_set</code></strong>=<em><code>1</code></em>, <strong><code>elim</code></strong>=<em><code>[]</code></em>)</p>
</blockquote>
<ul>
<li>Returns total dos for a spin_set (default 1) and energy limit. If spin-polarized calculations, gives SpinUp and SpinDown keys as well.</li>
<li><strong>Parameters</strong><ul>
<li>xml_data : From <a href="/pivotpy/XmlElementTree.html#read_asxml"><code>read_asxml</code></a> function</li>
<li>spin_set : int, default is 1.and</li>
<li>elim     : List [min,max] of energy, default empty.</li>
</ul>
</li>
<li><strong>Returns</strong><ul>
<li>Data     : pivotpy.Dict2Data with attibutes E_Fermi, ISPIN,tdos.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_tdos</span><span class="p">(</span><span class="n">xml_data</span><span class="o">=</span><span class="n">xml_data</span><span class="p">,</span><span class="n">spin_set</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">elim</span><span class="o">=</span><span class="p">[])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Data(
    E_Fermi = 3.72526782
    ISPIN = 1
    tdos = &lt;ndarray:shape=(301, 3)&gt;
)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_evals" class="doc_header"><code>get_evals</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/vr_parser.py#L283" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_evals</code>(<strong><code>xml_data</code></strong>=<em><code>None</code></em>, <strong><code>skipk</code></strong>=<em><code>None</code></em>, <strong><code>elim</code></strong>=<em><code>[]</code></em>)</p>
</blockquote>
<ul>
<li>Returns eigenvalues as numpy array. If spin-polarized calculations, gives SpinUp and SpinDown keys as well.</li>
<li><strong>Parameters</strong><ul>
<li>xml_data : From <a href="/pivotpy/XmlElementTree.html#read_asxml"><code>read_asxml</code></a> function</li>
<li>skipk    : Number of initil kpoints to skip.</li>
<li>elim     : List [min,max] of energy, default empty.</li>
</ul>
</li>
<li><strong>Returns</strong><ul>
<li>Data     : pivotpy.Dict2Data with attibutes evals and related parameters.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_evals</span><span class="p">(</span><span class="n">xml_data</span><span class="o">=</span><span class="n">xml_data</span><span class="p">,</span><span class="n">skipk</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span><span class="n">elim</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Data(
    E_Fermi = 3.72526782
    ISPIN = 1
    NBANDS = 7
    bands_range = range(1, 8)
    evals = &lt;ndarray:shape=(126, 7)&gt;
)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_bands_pro_set" class="doc_header"><code>get_bands_pro_set</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/vr_parser.py#L336" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_bands_pro_set</code>(<strong><code>xml_data</code></strong>=<em><code>None</code></em>, <strong><code>spin_set</code></strong>=<em><code>1</code></em>, <strong><code>skipk</code></strong>=<em><code>0</code></em>, <strong><code>bands_range</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<ul>
<li>Returns bands projection of a spin_set(default 1) as numpy array. If spin-polarized calculations, gives SpinUp and SpinDown keys as well.</li>
<li><strong>Parameters</strong><ul>
<li>xml_data    : From <a href="/pivotpy/XmlElementTree.html#read_asxml"><code>read_asxml</code></a> function</li>
<li>skipk       : Number of initil kpoints to skip (Default 0).</li>
<li>spin_set    : Spin set to get, default is 1.</li>
<li>bands_range : If elim used in <a href="/pivotpy/XmlElementTree.html#get_evals"><code>get_evals</code></a>,that will return bands_range to use here..</li>
</ul>
</li>
<li><strong>Returns</strong><ul>
<li>Data     : pivotpy.Dict2Data with attibutes of bands projections and related parameters.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_bands_pro_set</span><span class="p">(</span><span class="n">xml_data</span><span class="o">=</span><span class="n">xml_data</span><span class="p">,</span><span class="n">skipk</span><span class="o">=</span><span class="mi">135</span><span class="p">,</span><span class="n">spin_set</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">bands_range</span><span class="o">=</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Data(
    labels = [&#39;s&#39;, &#39;py&#39;, &#39;pz&#39;, &#39;px&#39;, &#39;dxy&#39;, &#39;dyz&#39;, &#39;dz2&#39;, &#39;dxz&#39;, &#39;x2-y2&#39;]
    pros = &lt;ndarray:shape=(2, 1, 1, 9)&gt;
)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_dos_pro_set" class="doc_header"><code>get_dos_pro_set</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/vr_parser.py#L389" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_dos_pro_set</code>(<strong><code>xml_data</code></strong>=<em><code>None</code></em>, <strong><code>spin_set</code></strong>=<em><code>1</code></em>, <strong><code>dos_range</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<ul>
<li>Returns dos projection of a spin_set(default 1) as numpy array. If spin-polarized calculations, gives SpinUp and SpinDown keys as well.</li>
<li><strong>Parameters</strong><ul>
<li>xml_data    : From <a href="/pivotpy/XmlElementTree.html#read_asxml"><code>read_asxml</code></a> function</li>
<li>spin_set    : Spin set to get, default 1.</li>
<li>dos_range   : If elim used in <a href="/pivotpy/XmlElementTree.html#get_tdos"><code>get_tdos</code></a>,that will return dos_range to use here..</li>
</ul>
</li>
<li><strong>Returns</strong><ul>
<li>Data     : pivotpy.Dict2Data with attibutes of dos projections and related parameters.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_structure" class="doc_header"><code>get_structure</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/vr_parser.py#L432" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_structure</code>(<strong><code>xml_data</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<ul>
<li>Returns structure's volume,basis,positions and rec-basis.</li>
<li><strong>Parameters</strong><ul>
<li>xml_data : From <a href="/pivotpy/XmlElementTree.html#read_asxml"><code>read_asxml</code></a> function.</li>
</ul>
</li>
<li><strong>Returns</strong><ul>
<li>Data     : pivotpy.Dict2Data with attibutes volume,basis,positions and rec_basis.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_structure</span><span class="p">(</span><span class="n">xml_data</span><span class="o">=</span><span class="n">xml_data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Data(
    volume = 45.73530449
    basis = &lt;ndarray:shape=(3, 3)&gt;
    rec_basis = &lt;ndarray:shape=(3, 3)&gt;
    positions = &lt;ndarray:shape=(2, 3)&gt;
)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Quick-Export-for-Bandstructure">Quick Export for Bandstructure<a class="anchor-link" href="#Quick-Export-for-Bandstructure"> </a></h2><p>A fully comprehensive command that uses all functions and returns data for spin set 1 (set 1 and 2 if spin-polarized calculations) could be constructed for immediate usage. It is <code>export_vasrun()</code>.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="export_vasprun" class="doc_header"><code>export_vasprun</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/vr_parser.py#L460" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>export_vasprun</code>(<strong><code>path</code></strong>=<em><code>None</code></em>, <strong><code>skipk</code></strong>=<em><code>None</code></em>, <strong><code>elim</code></strong>=<em><code>[]</code></em>, <strong><code>joinPathAt</code></strong>=<em><code>[]</code></em>, <strong><code>shift_kpath</code></strong>=<em><code>0</code></em>)</p>
</blockquote>
<ul>
<li>Returns a full dictionary of all objects from <code>vasprun.xml</code> file.</li>
<li><strong>Parameters</strong><ul>
<li>path       : Path to <code>vasprun.xml</code> file. Default is <code>'./vasprun.xml'</code>.</li>
<li>skipk      : Default is None. Automatically detects kpoints to skip.</li>
<li>elim       : List [min,max] of energy interval. Default is [], covers all bands.</li>
<li>joinPathAt : List of indices of kpoints where path is broken.</li>
<li>shift_kpath: Default 0. Can be used to merge multiple calculations on single axes side by side.</li>
</ul>
</li>
<li><strong>Returns</strong><ul>
<li>Data : Data accessible via dot notation containing nested Data objects:<ul>
<li>sys_info  : System Information</li>
<li>dim_info  : Contains information about dimensions of returned objects.</li>
<li>kpoints   : numpy array of kpoints with excluded IBZKPT points</li>
<li>kpath     : 1D numpy array directly accessible for plot.</li>
<li>bands     : Data containing bands.</li>
<li>tdos      : Data containing total dos.</li>
<li>pro_bands : Data containing bands projections.</li>
<li>pro_dos   : Data containing dos projections.</li>
<li>poscar    : Data containing basis,positions, rec_basis and volume.</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">export_vasprun</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s1">&#39;../vasprun.xml&#39;</span><span class="p">,</span><span class="n">elim</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-green-intense-fg"> 
      successful!
</span>
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Data(
    sys_info = Data(
        SYSTEM = AlAs
        NION = 2
        TypeION = 2
        ElemName = [&#39;Al&#39;, &#39;As&#39;]
        ElemIndex = [0, 1, 2]
        E_Fermi = 3.72526782
        ISPIN = 1
        fields = [&#39;s&#39;, &#39;py&#39;, &#39;pz&#39;, &#39;px&#39;, &#39;dxy&#39;, &#39;dyz&#39;, &#39;dz2&#39;, &#39;dxz&#39;, &#39;x2-y2&#39;]
        incar = Data(
            SYSTEM = AlAs
            PREC = high
            ALGO = N
            NELMIN = 7
            EDIFF = 0.00000100
            ISMEAR = 0
            SIGMA = 0.10000000
            LORBIT = 11
            KPOINT_BSE = -1     0     0     0
            LHFCALC = T
            HFSCREEN = 0.20100000
            PRECFOCK = fast
        )
    )
    dim_info = Data(
        ⇅ = Each of SpinUp/SpinDown Arrays
        kpoints = (NKPTS,3)
        kpath = (NKPTS,1)
        bands = ⇅(NKPTS,NBANDS)
        dos = ⇅(grid_size,3)
        pro_dos = ⇅(NION,grid_size,en+pro_fields)
        pro_bands = ⇅(NION,NKPTS,NBANDS,pro_fields)
    )
    kpoints = &lt;ndarray:shape=(126, 3)&gt;
    kpath = &lt;list:len=126&gt;
    bands = Data(
        E_Fermi = 3.72526782
        ISPIN = 1
        NBANDS = &lt;class &#39;numpy.int64&#39;&gt;
        bands_range = &lt;class &#39;range&#39;&gt;
        evals = &lt;ndarray:shape=(126, 3)&gt;
    )
    tdos = Data(
        E_Fermi = 3.72526782
        ISPIN = 1
        grid_range = &lt;class &#39;range&#39;&gt;
        tdos = &lt;ndarray:shape=(7, 3)&gt;
    )
    pro_bands = Data(
        labels = [&#39;s&#39;, &#39;py&#39;, &#39;pz&#39;, &#39;px&#39;, &#39;dxy&#39;, &#39;dyz&#39;, &#39;dz2&#39;, &#39;dxz&#39;, &#39;x2-y2&#39;]
        pros = &lt;ndarray:shape=(2, 126, 3, 9)&gt;
    )
    pro_dos = Data(
        labels = [&#39;energy&#39;, &#39;s&#39;, &#39;py&#39;, &#39;pz&#39;, &#39;px&#39;, &#39;dxy&#39;, &#39;dyz&#39;, &#39;dz2&#39;, &#39;dxz&#39;, &#39;x2-y2&#39;]
        pros = &lt;ndarray:shape=(2, 7, 10)&gt;
    )
    poscar = Data(
        volume = 45.73530449
        basis = &lt;ndarray:shape=(3, 3)&gt;
        rec_basis = &lt;ndarray:shape=(3, 3)&gt;
        positions = &lt;ndarray:shape=(2, 3)&gt;
    )
)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Joining-Multiple-Calculations">Joining Multiple Calculations<a class="anchor-link" href="#Joining-Multiple-Calculations"> </a></h2><ul>
<li>Sometimes one may need to compare two or more bandstructures in same figure, for that reason, it is easy to export two calculations and plot on same axis.</li>
<li>There is another situation, if you have a large supercell and split calculations into multiple ones, joining that calculations works same way, you will add the last value of first kpath into all values of next kpath and next last to next and so on, by just using <code>shift_kpath</code> in <a href="/pivotpy/XmlElementTree.html#export_vasprun"><code>export_vasprun</code></a> and plot each export on same axis, this will align bandstructures side by side on same axis.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Load-Exported-Vasprun-from-PowerShell">Load Exported Vasprun from PowerShell<a class="anchor-link" href="#Load-Exported-Vasprun-from-PowerShell"> </a></h2><p>On Windows, it will work automatically. On Linux/Mac it may require path to powershell executable.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_export" class="doc_header"><code>load_export</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/vr_parser.py#L532" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_export</code>(<strong><code>path</code></strong>=<em><code>'./vasprun.xml'</code></em>, <strong><code>joinPathAt</code></strong>=<em><code>[]</code></em>, <strong><code>shift_kpath</code></strong>=<em><code>0</code></em>, <strong><code>path_to_ps</code></strong>=<em><code>'pwsh'</code></em>, <strong><code>skipk</code></strong>=<em><code>None</code></em>, <strong><code>max_filled</code></strong>=<em><code>10</code></em>, <strong><code>max_empty</code></strong>=<em><code>10</code></em>, <strong><code>keep_files</code></strong>=<em><code>True</code></em>)</p>
</blockquote>
<ul>
<li>Returns a full dictionary of all objects from <code>vasprun.xml</code> file exported using powershell.</li>
<li><strong>Parameters</strong><ul>
<li>path       : Path to <code>vasprun.xml</code> file. Default is <code>'./vasprun.xml'</code>.</li>
<li>skipk      : Default is None. Automatically detects kpoints to skip.</li>
<li>path_to_ps : Path to <code>powershell.exe</code>. Automatically picks on Windows and Linux if added to PATH.</li>
<li>joinPathAt : List of indices of kpoints where path is broken.</li>
<li>shift_kpath: Default 0. Can be used to merge multiple calculations side by side.</li>
<li>keep_files : Could be use to clean exported text files. Default is True.</li>
<li>max_filled : Number of filled bands below and including VBM. Default is 10.</li>
<li>max_empty  : Number of empty bands above VBM. Default is 10.</li>
</ul>
</li>
<li><strong>Returns</strong><ul>
<li>Data : Data accessible via dot notation containing nested Data objects:<ul>
<li>sys_info  : System Information</li>
<li>dim_info  : Contains information about dimensions of returned objects.</li>
<li>kpoints   : numpy array of kpoints with excluded IBZKPT points</li>
<li>kpath     : 1D numpy array directly accessible for plot.</li>
<li>bands     : Data containing bands.</li>
<li>tdos      : Data containing total dos.</li>
<li>pro_bands : Data containing bands projections.</li>
<li>pro_dos   : Data containing dos projections.</li>
<li>poscar    : Data containing basis,positions, rec_basis and volume.</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This back and forth data transport is required in <a href="https://github.com/massgh/pivotpy-dash">pivotpy-dash</a> app where data is stored in browser in json format, but needs to by python objects for figures.</p>
<h2 id="Write-Clean-data-to-JSON-or-Pickle-file">Write Clean data to JSON or Pickle file<a class="anchor-link" href="#Write-Clean-data-to-JSON-or-Pickle-file"> </a></h2><p>Use <code>dump_vasprun</code> to write output of <a href="/pivotpy/XmlElementTree.html#export_vasprun"><code>export_vasprun</code></a> or <a href="/pivotpy/XmlElementTree.html#load_export"><code>load_export</code></a> to pickle/json file. Pickle is useful for quick load in python while json is useful to transfer data into any language.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="dump_dict" class="doc_header"><code>dump_dict</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/vr_parser.py#L681" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>dump_dict</code>(<strong><code>dict_data</code></strong>=<em><code>None</code></em>, <strong><code>dump_to</code></strong>=<em><code>'pickle'</code></em>, <strong><code>outfile</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<ul>
<li>Dump an <a href="/pivotpy/XmlElementTree.html#export_vasprun"><code>export_vasprun</code></a> or <a href="/pivotpy/XmlElementTree.html#load_export"><code>load_export</code></a>'s <code>Data</code> object or any dictionary to json or pickle string/file. It convert <a href="/pivotpy/XmlElementTree.html#Dict2Data"><code>Dict2Data</code></a> to dictionary before serializing to json/pickle, so json/pickle.loads() of converted Data would be a simple dictionary, pass that to <a href="/pivotpy/XmlElementTree.html#Dict2Data"><code>Dict2Data</code></a> to again make accessible via dot notation.</li>
<li><strong>Parameters</strong><ul>
<li>dict_data : Any dictionary/Dict2Data object containg numpy arrays, including <a href="/pivotpy/XmlElementTree.html#export_vasprun"><code>export_vasprun</code></a> or <a href="/pivotpy/XmlElementTree.html#load_export"><code>load_export</code></a> output.</li>
<li>dump_to  : Defualt is <code>pickle</code> or <code>json</code>.</li>
<li>outfile  : Defualt is None and return string. File name does not require extension.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_from_dump" class="doc_header"><code>load_from_dump</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/vr_parser.py#L713" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_from_dump</code>(<strong><code>file_or_str</code></strong>, <strong><code>keep_as_dict</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<ul>
<li>Loads a json/pickle dumped file or string by auto detecting it.</li>
<li><strong>Parameters</strong><ul>
<li>file_or_str : Filename of pickl/json or their string.</li>
<li>keep_as_dict: Defualt is False and return <code>Data</code> object. If True, returns dictionary.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pivotpy</span> <span class="k">as</span> <span class="nn">pp</span> 
<span class="n">evr</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">export_vasprun</span><span class="p">(</span><span class="s1">&#39;../vasprun.xml&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre><span class="ansi-green-intense-fg"> 
      successful!
</span>
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">dump_dict</span><span class="p">(</span><span class="n">evr</span><span class="o">.</span><span class="n">poscar</span><span class="p">,</span><span class="n">dump_to</span><span class="o">=</span><span class="s1">&#39;pickle&#39;</span><span class="p">)</span>
<span class="c1">#print(s)</span>
<span class="n">load_from_dump</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Data(
    volume = 45.73530449
    basis = &lt;ndarray:shape=(3, 3)&gt;
    rec_basis = &lt;ndarray:shape=(3, 3)&gt;
    positions = &lt;ndarray:shape=(2, 3)&gt;
)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

