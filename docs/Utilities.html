---

title: Utilities


keywords: fastai
sidebar: home_sidebar

summary: "This includes generally useful functions, including running PowerShell commands from Python."
description: "This includes generally useful functions, including running PowerShell commands from Python."
nb_path: "Utilities.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: Utilities.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_file_size" class="doc_header"><code>get_file_size</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/g_utils.py#L31" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_file_size</code>(<strong><code>path</code></strong>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">get_file_size</span><span class="p">(</span><span class="s1">&#39;Utilities.ipynb&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="interpolate_data" class="doc_header"><code>interpolate_data</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/g_utils.py#L43" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>interpolate_data</code>(<strong><code>x</code></strong>, <strong><code>y</code></strong>, <strong><code>n</code></strong>=<em><code>10</code></em>, <strong><code>k</code></strong>=<em><code>3</code></em>)</p>
</blockquote>
<ul>
<li>Returns interpolated xnew,ynew. If two points are same, it will add 0.1*min(dx&gt;0) to compensate it.</li>
<li><p><strong>Parameters</strong></p>
<ul>
<li>x: 1D array of size p,</li>
<li>y: ndarray of size p<em>q</em>r,....</li>
<li>n: Number of points to add between two given points.</li>
<li>k: Polynomial order to interpolate.</li>
</ul>
</li>
<li><p>Only axis 0 will be interpolated. If you want general interploation, use <code>from scipy.interpolate import make_interp_spline, BSpline</code></p>
</li>
<li><p><strong>General Usage</strong>: K(p),E(p,q) input from bandstructure.</p>
<ul>
<li><code>Knew,Enew= interpolate_data(K,E,n=10,k=3)</code>. cubic interploation</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ps2py" class="doc_header"><code>ps2py</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/g_utils.py#L72" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ps2py</code>(<strong><code>ps_command</code></strong>=<em><code>'Get-ChildItem'</code></em>, <strong><code>exec_type</code></strong>=<em><code>'-Command'</code></em>, <strong><code>path_to_ps</code></strong>=<em><code>'powershell.exe'</code></em>)</p>
</blockquote>
<ul>
<li>Captures powershell output in python.</li>
<li><strong>Parameters</strong><ul>
<li>ps_command: enclose ps_command in ' ' or " ".</li>
<li>exec_type : type of execution, default '-Command', could be '-File'.</li>
<li>path_to_ps: path to powerhell.exe if not added to PATH variables.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ps2std" class="doc_header"><code>ps2std</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/g_utils.py#L105" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ps2std</code>(<strong><code>ps_command</code></strong>=<em><code>'Get-ChildItem'</code></em>, <strong><code>exec_type</code></strong>=<em><code>'-Command'</code></em>, <strong><code>path_to_ps</code></strong>=<em><code>'powershell.exe'</code></em>)</p>
</blockquote>
<ul>
<li>Prints powershell output in python std.</li>
<li><strong>Parameters</strong><ul>
<li>ps_command: enclose ps_command in ' ' or " ".</li>
<li>exec_type: type of execution, default '-Command', could be '-File'.</li>
<li>path_to_ps: path to powerhell.exe if not added to PATH variables.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><a href="/pivotpy/Utilities.html#ps2std"><code>ps2std</code></a> only outputs returns of powershell to python std.</li>
<li><a href="/pivotpy/Utilities.html#ps2py"><code>ps2py</code></a>'s return could be manipulated in python.</li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ps2std</span><span class="p">(</span><span class="n">ps_command</span><span class="o">=</span><span class="s1">&#39;(Get-Process)[0..4]&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pp</span><span class="o">=</span><span class="n">ps2py</span><span class="p">(</span><span class="n">ps_command</span><span class="o">=</span><span class="s1">&#39;(Get-Process)[0..4]&#39;</span><span class="p">)</span>
<span class="n">pp</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_child_items" class="doc_header"><code>get_child_items</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/g_utils.py#L119" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_child_items</code>(<strong><code>path</code></strong>=<em><code>'E:\\Research\\pivotpy'</code></em>, <strong><code>depth</code></strong>=<em><code>None</code></em>, <strong><code>recursive</code></strong>=<em><code>True</code></em>, <strong><code>include</code></strong>=<em><code>None</code></em>, <strong><code>exclude</code></strong>=<em><code>None</code></em>, <strong><code>filesOnly</code></strong>=<em><code>False</code></em>, <strong><code>dirsOnly</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<ul>
<li>Returns selected directories/files recursively from a parent directory.</li>
<li><strong>Parameters</strong><ul>
<li>path    : path to a parent directory, default is <code>"."</code></li>
<li>depth   : int, subdirectories depth to get recursively, default is None to list all down.</li>
<li>recursive : If False, only list current directory items, if True,list all items recursively down the file system.</li>
<li>include: Default is None and includes everything. String of patterns separated by | to keep, could be a regular expression.</li>
<li>exclude: Default is None and removes nothing. String of patterns separated by | to drop,could be a regular expression.</li>
<li>filesOnly : Boolean, if True, returns only files.</li>
<li>dirsOnly  : Boolean, if True, returns only directories.</li>
</ul>
</li>
<li><strong>Returns</strong><ul>
<li>GLOB : Tuple (children,parent), children is list of selected directories/files and parent is given path. Access by index of by <code>get_child_items().{children,path}</code>.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">items</span> <span class="o">=</span> <span class="n">get_child_items</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s2">&quot;../&quot;</span><span class="p">,</span><span class="n">dirsOnly</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">include</span><span class="o">=</span><span class="s1">&#39;Current&#39;</span><span class="p">,</span><span class="n">exclude</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">items</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
<span class="n">items</span><span class="o">.</span><span class="n">children</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="color" class="doc_header"><code>class</code> <code>color</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/g_utils.py#L159" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>color</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<ul>
<li><code>pivotpy.g_utils.color</code> contains following attributes:<br>
color.r  --&gt; red<br>
color.rb --&gt; red-bold<br>
color.g  --&gt; green<br>
color.gb --&gt; green-bold<br>
color.b  --&gt; blue<br>
color.bb --&gt; blue-bold<br>
color.y  --&gt; yellow<br>
color.yb --&gt; yellow-bold<br>
color.m  --&gt; magenta<br>
color.mb --&gt; magenta-bold<br>
color.c  --&gt; cyan<br>
color.cb --&gt; cyan-bold    </li>
<li><strong>Usage</strong>: print(color.r('This is red'))           </li>
</ul>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="EncodeFromNumpy" class="doc_header"><code>class</code> <code>EncodeFromNumpy</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/g_utils.py#L181" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>EncodeFromNumpy</code>(<strong><code>skipkeys</code></strong>=<em><code>False</code></em>, <strong><code>ensure_ascii</code></strong>=<em><code>True</code></em>, <strong><code>check_circular</code></strong>=<em><code>True</code></em>, <strong><code>allow_nan</code></strong>=<em><code>True</code></em>, <strong><code>sort_keys</code></strong>=<em><code>False</code></em>, <strong><code>indent</code></strong>=<em><code>None</code></em>, <strong><code>separators</code></strong>=<em><code>None</code></em>, <strong><code>default</code></strong>=<em><code>None</code></em>) :: <code>JSONEncoder</code></p>
</blockquote>
<ul>
<li>Serializes python/Numpy objects via customizing json encoder.</li>
<li><strong>Usage</strong><ul>
<li><code>json.dumps(python_dict, cls=EncodeFromNumpy)</code> to get json string.</li>
<li><code>json.dump(*args, cls=EncodeFromNumpy)</code> to create a file.json.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="DecodeToNumpy" class="doc_header"><code>class</code> <code>DecodeToNumpy</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/g_utils.py#L208" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>DecodeToNumpy</code>(<strong>*<code>args</code></strong>, <strong>**<code>kwargs</code></strong>) :: <code>JSONDecoder</code></p>
</blockquote>
<ul>
<li>Deserilizes JSON object to Python/Numpy's objects.</li>
<li><strong>Usage</strong><ul>
<li><code>json.loads(json_string,cls=DecodeToNumpy)</code> from string, use <code>json.load()</code> for file.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pivotpy</span> <span class="k">as</span> <span class="nn">pp</span>
<span class="n">vr</span><span class="o">=</span><span class="n">pp</span><span class="o">.</span><span class="n">export_vasprun</span><span class="p">(</span><span class="n">path</span> <span class="o">=</span> <span class="s2">&quot;E:/Research/graphene_example/ISPIN_2/bands/vasprun.xml&quot;</span> <span class="p">,</span><span class="n">skipk</span><span class="o">=</span><span class="mi">88</span><span class="p">,</span><span class="n">elim</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ORIGINAL DATA : </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">vr</span><span class="o">.</span><span class="n">poscar</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()))</span>
<span class="n">s</span><span class="o">=</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">vr</span><span class="o">.</span><span class="n">poscar</span><span class="o">.</span><span class="n">to_dict</span><span class="p">(),</span> <span class="bp">cls</span><span class="o">=</span><span class="n">EncodeFromNumpy</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;JSON STRING : </span><span class="si">{}</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">s</span><span class="p">))</span>
<span class="n">s2</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="bp">cls</span><span class="o">=</span><span class="n">DecodeToNumpy</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;RETRIEVED DATA : </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">s2</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Vasprun" class="doc_header"><code>class</code> <code>Vasprun</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/g_utils.py#L238" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Vasprun</code>(<strong><code>path</code></strong>=<em><code>None</code></em>, <strong><code>skipk</code></strong>=<em><code>None</code></em>, <strong><code>elim</code></strong>=<em><code>[]</code></em>, <strong><code>kseg_inds</code></strong>=<em><code>[]</code></em>, <strong><code>shift_kpath</code></strong>=<em><code>0</code></em>)</p>
</blockquote>
<ul>
<li>All plotting functions that depend on <a href="/pivotpy/XmlElementTree.html#export_vasprun"><code>export_vasprun</code></a> are joined under this class and renamed.</li>
<li><strong>Parameters</strong><ul>
<li>path       : str: path/to/vasprun.xml. Auto picks in CWD.</li>
<li>skipk      : int: Skip initial kpoints</li>
<li>elim       : list: Energy range e.g. [-5,5]</li>
<li>kseg_inds : list: Join broken path at given indices. Could be obtained from <code>SEG-INDS</code> if used <code>trace_kpath</code>.</li>
<li>shift_kpath: float: Shift in kpath values for side by side plotting.</li>
</ul>
</li>
<li><strong>Attributes</strong><ul>
<li>data : Return of <a href="/pivotpy/XmlElementTree.html#export_vasprun"><code>export_vasprun</code></a> which is auto-picked in plotting methods under this class.</li>
</ul>
</li>
<li><strong>Methods</strong><ul>
<li>sbands    : Shortcut for <a href="/pivotpy/StaticPlots.html#quick_bplot"><code>quick_bplot</code></a>.</li>
<li>sdos      : Shortcut for <a href="/pivotpy/StaticPlots.html#quick_dos_lines"><code>quick_dos_lines</code></a>.</li>
<li>srgb      : Shortcut for <a href="/pivotpy/StaticPlots.html#quick_rgb_lines"><code>quick_rgb_lines</code></a>.</li>
<li>scolor    : Shortcut for <a href="/pivotpy/StaticPlots.html#quick_color_lines"><code>quick_color_lines</code></a>.</li>
<li>idos      : Shortcut for <a href="/pivotpy/InteractivePlots.html#plotly_dos_lines"><code>plotly_dos_lines</code></a>.</li>
<li>irgb      : Shortcut for <a href="/pivotpy/InteractivePlots.html#plotly_rgb_lines"><code>plotly_rgb_lines</code></a>.</li>
<li>Each of above mathods have an attribute <code>kwargs</code> which can be accessed, modified and put back as argumnets.</li>
</ul>
</li>
<li><strong>Example</strong><blockquote><p>vasp   = Vasprun(path='./vasprun.xml')
kwargs = vasp.sbands.kwargs
Modify kwargs dictionary as you want for input parameters and unpack back in function.
vasp.sbands(**kwargs)</p>
</blockquote>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="nav_links" class="doc_header"><code>nav_links</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/g_utils.py#L293" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>nav_links</code>(<strong><code>current_index</code></strong>=<em><code>0</code></em>, <strong><code>doc_url</code></strong>=<em><code>'https://massgh.github.io/pivotpy/'</code></em>, <strong><code>items</code></strong>=<em><code>['Index', 'XmlElementTree', 'StaticPlots', 'InteractivePlots', 'Utilities', 'StructureIO', 'Widgets']</code></em>, <strong><code>horizontal</code></strong>=<em><code>False</code></em>, <strong><code>out_string</code></strong>=<em><code>False</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="export_outcar" class="doc_header"><code>export_outcar</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/g_utils.py#L321" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>export_outcar</code>(<strong><code>path</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<ul>
<li>Read potential at ionic sites from OUTCAR.</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="export_potential" class="doc_header"><code>export_potential</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/g_utils.py#L370" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>export_potential</code>(<strong><code>locpot</code></strong>=<em><code>None</code></em>, <strong><code>e</code></strong>=<em><code>True</code></em>, <strong><code>m</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<ul>
<li>Returns Data from LOCPOT and similar structure files like CHG. Loads only single set out of 2/4 magnetization data to avoid performance/memory cost while can load electrostatic and one set of magnetization together.</li>
<li><strong>Parameters</strong><ul>
<li>locpot: path/to/LOCPOT or similar stuructured file like CHG. LOCPOT is auto picked in CWD.</li>
<li>e     : Electric potential/charge density. Default is True.</li>
<li>m     : Magnetization density m. Default is False. If True, picks <code>m</code> for spin polarized case, and <code>m_x</code> for non-colinear case. Additionally it can take 'x','y' and 'z' in case of non-colinear calculations.</li>
</ul>
</li>
<li><strong>Exceptions</strong><ul>
<li>Would raise index error if magnetization density set is not present in LOCPOT/CHG in case <code>m</code> is not False.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="LOCPOT_CHG" class="doc_header"><code>class</code> <code>LOCPOT_CHG</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/g_utils.py#L450" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>LOCPOT_CHG</code>(<strong><code>path</code></strong>=<em><code>None</code></em>, <strong><code>e</code></strong>=<em><code>True</code></em>, <strong><code>m</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<ul>
<li>Returns Data from LOCPOT and similar structure files like CHG. Loads only single set out of 2/4 magnetization data to avoid performance/memory cost while can load electrostatic and one set of magnetization together.</li>
<li><strong>Parameters</strong><ul>
<li>path: path/to/LOCPOT or similar stuructured file like CHG. LOCPOT is auto picked in CWD.</li>
<li>e   : Electric potential/charge density. Default is True.</li>
<li>m   : Magnetization density m. Default is False. If True, picks <code>m</code> for spin polarized case, and <code>m_x</code> for non-colinear case. Additionally it can take 'x','y' and 'z' in case of non-colinear calculations.</li>
</ul>
</li>
<li><strong>Exceptions</strong><ul>
<li>Would raise index error if magnetization density set is not present in LOCPOT/CHG in case <code>m</code> is not False.</li>
</ul>
</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="transform_color" class="doc_header"><code>transform_color</code><a href="https://github.com/massgh/pivotpy/tree/master/pivotpy/g_utils.py#L556" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>transform_color</code>(<strong><code>arr</code></strong>, <strong><code>s</code></strong>=<em><code>1</code></em>, <strong><code>c</code></strong>=<em><code>1</code></em>, <strong><code>b</code></strong>=<em><code>0</code></em>, <strong><code>mixing_matrix</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<ul>
<li>Color transformation such as brightness, contrast, saturation and mixing of an input color array. <code>c = -1</code> would invert color,keeping everything else same.</li>
<li><strong>Parameters</strong><ul>
<li>arr: input array, a single RGB/RGBA color or an array with inner most dimension equal to 3 or 4. e.g. [[[0,1,0,1],[0,0,1,1]]].</li>
<li>c  : contrast, default is 1. Can be a float in [-1,1].</li>
<li>s  : saturation, default is 1. Can be a float in [-1,1]. If s = 0, you get a gray scale image.</li>
<li>b  : brightness, default is 0. Can be a float in [-1,1] or list of three brightnesses for RGB components.</li>
<li>mixing_matrix: A 3x3 matrix to mix RGB values, such as <code>pp.color_matrix</code>.</li>
</ul>
</li>
</ul>
<p><a href="https://docs.microsoft.com/en-us/windows/win32/gdiplus/-gdiplus-recoloring-use?redirectedfrom=MSDN">Recoloring</a>
<a href="https://docs.rainmeter.net/tips/colormatrix-guide/">Rainmeter</a></p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span><span class="o">,</span><span class="nn">pivotpy</span> <span class="k">as</span> <span class="nn">pp</span> 
<span class="n">axs</span> <span class="o">=</span> <span class="n">pp</span><span class="o">.</span><span class="n">init_figure</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mf">4.5</span><span class="p">,</span><span class="mf">2.5</span><span class="p">))</span>
<span class="n">carr</span> <span class="o">=</span> <span class="p">[[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]]]</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">transform_color</span><span class="p">(</span><span class="n">arr</span><span class="o">=</span><span class="n">carr</span><span class="p">))</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">transform_color</span><span class="p">(</span><span class="n">s</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">arr</span><span class="o">=</span><span class="n">carr</span><span class="p">))</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">transform_color</span><span class="p">(</span><span class="n">b</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">0.5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">arr</span><span class="o">=</span><span class="n">carr</span><span class="p">))</span>
<span class="n">axs</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">transform_color</span><span class="p">(</span><span class="n">arr</span><span class="o">=</span><span class="n">carr</span><span class="p">,</span><span class="n">mixing_matrix</span><span class="o">=</span><span class="n">pp</span><span class="o">.</span><span class="n">color_matrix</span><span class="p">[:,:</span><span class="mi">3</span><span class="p">]))</span>
<span class="k">for</span> <span class="n">ax</span><span class="p">,</span><span class="n">txt</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">axs</span><span class="o">.</span><span class="n">ravel</span><span class="p">(),[</span><span class="s1">&#39;original&#39;</span><span class="p">,</span><span class="s1">&#39;s = 0&#39;</span><span class="p">,</span><span class="s1">&#39;b = [-0.5,0,0]&#39;</span><span class="p">,</span><span class="s1">&#39;mixing_matrix&#39;</span><span class="p">]):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_yticklabels</span><span class="p">([])</span>
<span class="n">_</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">gcf</span><span class="p">()</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;transform_color(arr,s,c,b,mixing_matrix)&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;b&#39;</span><span class="p">,</span><span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

</div>
 

<script type="application/vnd.jupyter.widget-state+json">
{"state": {"16a869a2d6b14932a02a545dc2136163": {"model_name": "LayoutModel", "model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "4958b2e1bf984f0387028aa0b114fa73": {"model_name": "OutputModel", "model_module": "@jupyter-widgets/output", "model_module_version": "1.0.0", "state": {"_dom_classes": ["output"], "_model_module": "@jupyter-widgets/output", "_model_module_version": "1.0.0", "_model_name": "OutputModel", "_view_count": null, "_view_module": "@jupyter-widgets/output", "_view_module_version": "1.0.0", "_view_name": "OutputView", "layout": "IPY_MODEL_16a869a2d6b14932a02a545dc2136163", "msg_id": "", "outputs": []}}}, "version_major": 2, "version_minor": 0}
</script>

