

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>pivotpy.widgets &mdash; Pivotpy 0.9.8 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Pivotpy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api.html">Pivotpy API Reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Pivotpy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../index.html">Module code</a> &raquo;</li>
        
      <li>pivotpy.widgets</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for pivotpy.widgets</h1><div class="highlight"><pre>
<span></span><span class="c1"># AUTOGENERATED! DO NOT EDIT! File to edit: Widgets.ipynb (unless otherwise specified).</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;light_style&#39;</span><span class="p">,</span> <span class="s1">&#39;dark_style&#39;</span><span class="p">,</span> <span class="s1">&#39;get_files_gui&#39;</span><span class="p">,</span> <span class="s1">&#39;get_input_gui&#39;</span><span class="p">,</span> <span class="s1">&#39;read_data&#39;</span><span class="p">,</span> <span class="s1">&#39;click_data&#39;</span><span class="p">,</span> <span class="s1">&#39;tabulate_data&#39;</span><span class="p">,</span>
           <span class="s1">&#39;save_data&#39;</span><span class="p">,</span> <span class="s1">&#39;color_toggle&#39;</span><span class="p">,</span> <span class="s1">&#39;clear_cache&#39;</span><span class="p">,</span> <span class="s1">&#39;matplotlib_code&#39;</span><span class="p">,</span> <span class="s1">&#39;generate_summary&#39;</span><span class="p">,</span> <span class="s1">&#39;show_app&#39;</span><span class="p">]</span>

<span class="c1"># Cell</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

<span class="c1"># Widgets Imports</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">Markdown</span>
<span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">ipw</span>
<span class="kn">from</span> <span class="nn">ipywidgets</span> <span class="kn">import</span> <span class="n">Layout</span><span class="p">,</span><span class="n">Label</span><span class="p">,</span><span class="n">Button</span><span class="p">,</span> <span class="n">Box</span><span class="p">,</span><span class="n">HBox</span><span class="p">,</span><span class="n">VBox</span>
<span class="kn">from</span> <span class="nn">ipywidgets.embed</span> <span class="kn">import</span> <span class="n">embed_minimal_html</span><span class="p">,</span> <span class="n">dependency_state</span>

<span class="c1"># More exports</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">plotly.graph_objects</span> <span class="k">as</span> <span class="nn">go</span>
<span class="kn">import</span> <span class="nn">pivotpy.vr_parser</span> <span class="k">as</span> <span class="nn">vp</span>
<span class="kn">import</span> <span class="nn">pivotpy.g_utils</span> <span class="k">as</span> <span class="nn">gu</span>
<span class="kn">import</span> <span class="nn">pivotpy.i_plots</span> <span class="k">as</span> <span class="nn">ip</span>

<span class="c1"># Cell</span>
<span class="n">light_style</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;style&gt;</span>
<span class="s2">               .widget-text input {</span>
<span class="s2">                   background-color:white !important;</span>
<span class="s2">                   border-radius:20px !important;</span>
<span class="s2">                   padding: 0px 10px 0px 10px !important;</span>
<span class="s2">                   border: 1px solid #e0e8e8 !important;</span>
<span class="s2">                   color: gray !important;</span>
<span class="s2">                   }</span>
<span class="s2">               .widget-text input:focus {</span>
<span class="s2">                   border: 1px solid skyblue !important;</span>
<span class="s2">                   }</span>
<span class="s2">               .widget-text input:hover {</span>
<span class="s2">                   border: 1px solid skyblue !important;</span>
<span class="s2">                   }</span>
<span class="s2">               .widget-dropdown &gt; select {</span>
<span class="s2">                   background-color: transparent !important;</span>
<span class="s2">                   border:none !important;</span>
<span class="s2">                   border-bottom: 1px solid skyblue !important;</span>
<span class="s2">                   box-shadow: inset 0 -20px 10px -20px skyblue;</span>
<span class="s2">               }</span>
<span class="s2">               .widget-dropdown &gt; select:hover {</span>
<span class="s2">                   background-color: white !important;</span>
<span class="s2">               }</span>
<span class="s2">               .widget-dropdown &gt; select &gt; option {</span>
<span class="s2">                   color: gray !important;</span>
<span class="s2">                   background-color: #eaf0f0 !important;</span>
<span class="s2">               }</span>
<span class="s2">               .widget-dropdown &gt; select &gt; option:focus {</span>
<span class="s2">                   background-color: red !important;</span>
<span class="s2">               }</span>
<span class="s2">               .widget-box {</span>
<span class="s2">                   background-color:#eaf0f0 !important;</span>
<span class="s2">                   border-radius:5px !important;</span>
<span class="s2">                   padding:1px !important;</span>
<span class="s2">                   border: 1px solid whitesmoke !important;</span>
<span class="s2">                   box-shadow: 1px 1px 1px 1px gray !important;</span>
<span class="s2">                }</span>
<span class="s2">                .p-Collapse {</span>
<span class="s2">                    display: flex;</span>
<span class="s2">                    flex-direction: row;</span>
<span class="s2">                    align-items: stretch;</span>

<span class="s2">                }</span>
<span class="s2">                .p-Accordion .p-Collapse + .p-Collapse {</span>
<span class="s2">                    margin-top: 0px;</span>
<span class="s2">                }</span>
<span class="s2">                .borderless {</span>
<span class="s2">                border: 1px solid transparent !important;</span>
<span class="s2">                box-shadow: none !important;</span>
<span class="s2">                border-radius: 0px !important;</span>
<span class="s2">                margin:4px !important;</span>
<span class="s2">                }</span>
<span class="s2">                .marginless {</span>
<span class="s2">                    margin: 0px !important;</span>
<span class="s2">                    border-radius: 0px !important;</span>
<span class="s2">                }</span>
<span class="s2">                .output {</span>
<span class="s2">                    color: black !important;</span>
<span class="s2">                    background-color:inherit !important;</span>
<span class="s2">                }</span>
<span class="s2">                .widget-tab {</span>
<span class="s2">                   background-color:#eaf0f0 !important;</span>
<span class="s2">                   border: 1px solid whitesmoke !important;</span>
<span class="s2">                   box-shadow: 1px 1px 1px 1px gray !important;</span>
<span class="s2">                   padding: 0px 2px 2px 2px !important;</span>

<span class="s2">                }</span>
<span class="s2">                .widget-tab-contents, .widget-tab &gt; .widget-tab-contents {</span>
<span class="s2">                width: 100%;</span>
<span class="s2">                box-sizing: border-box;</span>
<span class="s2">                margin: 0px !important;</span>
<span class="s2">                padding: 0px !important;</span>
<span class="s2">                flex-grow: 1;</span>
<span class="s2">                overflow: auto;</span>
<span class="s2">                background-color:#eaf0f0 !important;</span>
<span class="s2">                border: none !important;</span>
<span class="s2">                }</span>
<span class="s2">                .widget-tab &gt; .p-TabBar .p-TabBar-tab {</span>
<span class="s2">                background-color:#eaf0f0 !important;</span>
<span class="s2">                border: none !important;</span>
<span class="s2">                color: #00aaff !important;</span>
<span class="s2">                font-weight: bold !important;</span>
<span class="s2">                font-size: 16px !important;</span>
<span class="s2">                font-family: &quot;Times&quot;,&quot;serif&quot; !important;</span>
<span class="s2">                text-align: center !important;</span>
<span class="s2">                }</span>
<span class="s2">                .widget-html, .widget-html-content {</span>
<span class="s2">                    margin: 0 !important;</span>
<span class="s2">                    padding: 2px !important;</span>
<span class="s2">                }</span>
<span class="s2">                table { color:black !important;}</span>
<span class="s2">                tr:nth-child(odd) {background-color: #eaf0f0 !important;}</span>
<span class="s2">                tr:nth-child(even) {background-color: white !important;}</span>
<span class="s2">                .widget-button,.widget-toggle-button {</span>
<span class="s2">                    color: black !important;</span>
<span class="s2">                    min-width: max-content !important;</span>
<span class="s2">                    background-color: #c3d4d4;</span>
<span class="s2">                    border-radius: 5px !important;</span>
<span class="s2">                }</span>
<span class="s2">                tr:hover{</span>
<span class="s2">                    background-color: #abe4ff !important;</span>
<span class="s2">                }</span>
<span class="s2">            &lt;/style&gt;&quot;&quot;&quot;</span>

<span class="n">dark_style</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;style&gt;</span>
<span class="s2">               .widget-text input {</span>
<span class="s2">                   background-color:black !important;</span>
<span class="s2">                   border-radius:20px !important;</span>
<span class="s2">                   padding: 0px 10px 0px 10px !important;</span>
<span class="s2">                   border: 1px solid #404040 !important;</span>
<span class="s2">                   color: #abb2bf !important;</span>
<span class="s2">                   }</span>
<span class="s2">               .widget-text input:focus {</span>
<span class="s2">                   border: 1px solid skyblue !important;</span>
<span class="s2">                   }</span>
<span class="s2">               .widget-text input:hover {</span>
<span class="s2">                   border: 1px solid skyblue !important;</span>
<span class="s2">                   }</span>
<span class="s2">               .widget-dropdown &gt; select {</span>
<span class="s2">                   background-color: transparent !important;</span>
<span class="s2">                   border:none !important;</span>
<span class="s2">                   border-bottom: 1px solid skyblue !important;</span>
<span class="s2">                   box-shadow: inset 0 -20px 10px -20px skyblue;</span>
<span class="s2">                   color: white !important;</span>
<span class="s2">               }</span>
<span class="s2">               .widget-dropdown &gt; select:hover {</span>
<span class="s2">                   background-color: black !important;</span>
<span class="s2">               }</span>
<span class="s2">               .widget-dropdown &gt; select &gt; option {</span>
<span class="s2">                   color: whitesmoke !important;</span>
<span class="s2">                   background-color: black !important;</span>
<span class="s2">               }</span>
<span class="s2">               .widget-dropdown &gt; select &gt; option:focus {</span>
<span class="s2">                   background-color: red !important;</span>
<span class="s2">               }</span>
<span class="s2">               .widget-label {</span>
<span class="s2">                   color: white !important;</span>
<span class="s2">               }</span>
<span class="s2">               .widget-html {</span>
<span class="s2">                   color: white !important;</span>
<span class="s2">               }</span>
<span class="s2">               .widget-box {</span>
<span class="s2">                   background-color:#282c34 !important;</span>
<span class="s2">                   border-radius:5px !important;</span>
<span class="s2">                   padding:1px !important;</span>
<span class="s2">                   border: 1px solid black !important;</span>
<span class="s2">                   box-shadow: 1px 1px 1px 1px black !important;</span>
<span class="s2">                }</span>
<span class="s2">                .borderless {</span>
<span class="s2">                border: 1px solid transparent !important;</span>
<span class="s2">                box-shadow: none !important;</span>
<span class="s2">                border-radius: 4px !important;</span>
<span class="s2">                margin:4px !important;</span>
<span class="s2">                }</span>
<span class="s2">                .marginless {</span>
<span class="s2">                    margin: 0px !important;</span>
<span class="s2">                    border-radius: 0px !important;</span>
<span class="s2">                }</span>
<span class="s2">                .output {</span>
<span class="s2">                    color: white !important;</span>
<span class="s2">                    background-color:inherit !important;</span>
<span class="s2">                }</span>
<span class="s2">                .widget-tab {</span>
<span class="s2">                   background-color:black !important;</span>
<span class="s2">                   border: none !important;</span>
<span class="s2">                   box-shadow: 1px 1px 1px 1px gray !important;</span>
<span class="s2">                   padding: 0px 2px 2px 2px !important;</span>

<span class="s2">                }</span>
<span class="s2">                .widget-tab-contents, .widget-tab &gt; .widget-tab-contents {</span>
<span class="s2">                width: 100%;</span>
<span class="s2">                box-sizing: border-box;</span>
<span class="s2">                margin: 0px !important;</span>
<span class="s2">                padding: 0px !important;</span>
<span class="s2">                flex-grow: 1;</span>
<span class="s2">                overflow: auto;</span>
<span class="s2">                border: none !important;</span>
<span class="s2">                background-color:black !important;</span>
<span class="s2">                }</span>
<span class="s2">                .widget-tab &gt; .p-TabBar .p-TabBar-tab {</span>
<span class="s2">                background-color:black !important;</span>
<span class="s2">                border: none !important;</span>
<span class="s2">                color: #00aaff !important;</span>
<span class="s2">                font-weight: bold !important;</span>
<span class="s2">                font-size: 16px !important;</span>
<span class="s2">                font-family: &quot;Times&quot;,&quot;serif&quot; !important;</span>
<span class="s2">                text-align: center !important;</span>
<span class="s2">                }</span>
<span class="s2">                table { color:white !important;}</span>
<span class="s2">                tr:nth-child(odd) {background-color: #282c34 !important;}</span>
<span class="s2">                tr:nth-child(even) {background-color: black !important;}</span>
<span class="s2">                .widget-button,.widget-toggle-button {</span>
<span class="s2">                    color: 	whitesmoke !important;</span>
<span class="s2">                    min-width: max-content !important;</span>
<span class="s2">                    background-color: #3f5959;</span>
<span class="s2">                    border-radius: 5px !important;</span>
<span class="s2">                }</span>
<span class="s2">                tr:hover{</span>
<span class="s2">                    background-color: #196285 !important;</span>
<span class="s2">                }</span>

<span class="s2">            &lt;/style&gt;&quot;&quot;&quot;</span>

<span class="c1"># Cell</span>
<div class="viewcode-block" id="get_files_gui"><a class="viewcode-back" href="../../api.html#pivotpy.widgets.get_files_gui">[docs]</a><span class="k">def</span> <span class="nf">get_files_gui</span><span class="p">(</span><span class="n">auto_fill</span> <span class="o">=</span> <span class="s1">&#39;vasprun.xml&#39;</span><span class="p">,</span><span class="n">html_style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">320</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    - Creates a GUI interface for files/folders filtering.</span>
<span class="sd">    - **Parmeters**</span>
<span class="sd">        - auto_fill  : Default is `vasprun.xml`, any file/folder.</span>
<span class="sd">        - html_style : None,`dark_style` or `light_style`.</span>
<span class="sd">        - height     : Height of Grid box.</span>
<span class="sd">    - **Returns**</span>
<span class="sd">        - Tuple(GUI_gridbox,Files_Dropdown). Access second one by item itself.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">files_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">continuous_update</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">pw</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>

    <span class="n">incldue_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">auto_fill</span><span class="p">)</span>

    <span class="n">excldue_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Text</span><span class="p">()</span>
    <span class="n">d_layout</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;30%&#39;</span><span class="p">)</span>
    <span class="n">l_layout</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;19%&#39;</span><span class="p">)</span>
    <span class="n">depth_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="kc">None</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span><span class="n">value</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">d_layout</span><span class="p">)</span>
    <span class="n">item_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Both&#39;</span><span class="p">,</span><span class="s1">&#39;Files&#39;</span><span class="p">,</span><span class="s1">&#39;Folders&#39;</span><span class="p">],</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;Files&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">d_layout</span><span class="p">)</span>
    <span class="n">item_box</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">ipw</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Depth: &#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_layout</span><span class="p">),</span><span class="n">depth_w</span><span class="p">,</span><span class="n">ipw</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Type: &#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_layout</span><span class="p">),</span><span class="n">item_w</span><span class="p">])</span>
    <span class="n">item_box</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span>

    <span class="n">applybtn_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Apply Filters&#39;</span><span class="p">)</span>
    <span class="n">applybtn_w</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">button_color</span> <span class="o">=</span> <span class="s1">&#39;skyblue&#39;</span>
    <span class="n">gci_output</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">px&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">height</span><span class="o">-</span><span class="mi">70</span><span class="p">)))</span>
    <span class="n">label_head</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s2">&quot;&lt;h3&gt;Your Filtered Files List&lt;/h3&gt;&quot;</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">filter_gci</span><span class="p">(</span><span class="n">applybtn_w</span><span class="p">):</span>
        <span class="n">applybtn_w</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Applying...&#39;</span>
        <span class="n">applybtn_w</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">pw</span><span class="o">.</span><span class="n">value</span><span class="p">):</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">pw</span><span class="o">.</span><span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">gci_output</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Given path does not exists.&quot;</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Falling back to PWD: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()))</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
            <span class="n">pw</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">path</span>
        <span class="n">gci</span> <span class="o">=</span> <span class="n">vp</span><span class="o">.</span><span class="n">Dict2Data</span><span class="p">({</span><span class="s1">&#39;children&#39;</span><span class="p">:[],</span><span class="s1">&#39;parent&#39;</span><span class="p">:</span><span class="n">path</span><span class="p">})</span>

        <span class="k">if</span> <span class="s1">&#39;Files&#39;</span> <span class="ow">in</span> <span class="n">item_w</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">file_type</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">filesOnly</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">elif</span> <span class="s1">&#39;Folders&#39;</span> <span class="ow">in</span> <span class="n">item_w</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">file_type</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">dirsOnly</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">file_type</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">gci</span> <span class="o">=</span> <span class="n">gu</span><span class="o">.</span><span class="n">get_child_items</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="n">path</span><span class="p">,</span> <span class="o">**</span><span class="n">file_type</span><span class="p">,</span>
                           <span class="n">include</span><span class="o">=</span> <span class="n">incldue_w</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                           <span class="n">exclude</span><span class="o">=</span> <span class="n">excldue_w</span><span class="o">.</span><span class="n">value</span><span class="p">,</span>
                           <span class="n">depth</span><span class="o">=</span><span class="n">depth_w</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">with</span> <span class="n">gci_output</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Something went wrong&#39;</span><span class="p">)</span>
        <span class="c1"># Enable before any error occur.</span>
        <span class="n">applybtn_w</span><span class="o">.</span><span class="n">disabled</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">files_w</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="n">name</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">gci</span><span class="o">.</span><span class="n">parent</span><span class="p">,</span><span class="n">name</span><span class="p">)</span> <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">gci</span><span class="o">.</span><span class="n">children</span><span class="p">}</span>

        <span class="n">applybtn_w</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Successful!&#39;</span>
        <span class="n">applybtn_w</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">button_color</span> <span class="o">=</span> <span class="s1">&#39;green&#39;</span>
        <span class="n">label_head</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&lt;h3&gt;From: </span><span class="si">{}</span><span class="s2">&lt;/h3&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">gci</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">gci_output</span><span class="p">:</span>
            <span class="n">display</span><span class="p">(</span><span class="n">ipw</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s2">&quot;&lt;h4&gt;</span><span class="si">{}</span><span class="s2"> files found.&lt;/h4&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">gci</span><span class="o">.</span><span class="n">children</span><span class="p">))))</span>
            <span class="n">display</span><span class="p">(</span><span class="n">ipw</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s2">&quot;&lt;ol&gt;</span><span class="si">{}</span><span class="s2">&lt;ol&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="s1">&#39;&lt;li&gt;</span><span class="si">{}</span><span class="s1">&lt;/li&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">gci</span><span class="o">.</span><span class="n">children</span><span class="p">]))))</span>


        <span class="n">applybtn_w</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Apply Filters&#39;</span>
        <span class="n">applybtn_w</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">button_color</span> <span class="o">=</span> <span class="s1">&#39;skyblue&#39;</span>
        <span class="n">gci_output</span><span class="o">.</span><span class="n">clear_output</span><span class="p">(</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">applybtn_w</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">filter_gci</span><span class="p">)</span>
    <span class="n">out_box</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Box</span><span class="p">([</span><span class="n">gci_output</span><span class="p">])</span>
    <span class="n">right_box</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">VBox</span><span class="p">([</span><span class="n">label_head</span><span class="p">,</span><span class="n">out_box</span><span class="p">])</span>
    <span class="n">out_box</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span>
    <span class="n">right_box</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span>
    <span class="n">i_layout</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;99%&#39;</span><span class="p">)</span>
    <span class="n">incldue_w</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">i_layout</span>
    <span class="n">excldue_w</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">i_layout</span>
    <span class="n">pw</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">i_layout</span>
    <span class="n">input_box</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">VBox</span><span class="p">([</span>
        <span class="n">ipw</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Path to Project Folder&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">i_layout</span><span class="p">),</span><span class="n">pw</span><span class="p">,</span>
        <span class="n">ipw</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Items to Include (separate by |)&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">i_layout</span><span class="p">),</span><span class="n">incldue_w</span><span class="p">,</span>
        <span class="n">ipw</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Items to Exclude (separate by |)&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">i_layout</span><span class="p">),</span><span class="n">excldue_w</span><span class="p">,</span>
        <span class="n">item_box</span><span class="p">,</span>
        <span class="n">applybtn_w</span><span class="p">],</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;330px&#39;</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">html_style</span><span class="p">:</span>
        <span class="n">html_style</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">full_box</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">ipw</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">html_style</span><span class="p">),</span><span class="n">input_box</span><span class="p">,</span> <span class="n">right_box</span><span class="p">],</span>
                        <span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">px&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">height</span><span class="p">)))</span>
    <span class="n">full_box</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span>
    <span class="n">full_box</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">full_box</span><span class="p">,</span> <span class="n">files_w</span></div>


<span class="c1"># Cell</span>
<div class="viewcode-block" id="get_input_gui"><a class="viewcode-back" href="../../api.html#pivotpy.widgets.get_input_gui">[docs]</a><span class="k">def</span> <span class="nf">get_input_gui</span><span class="p">(</span><span class="n">rgb</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">sys_info</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">html_style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mi">400</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    - Creates a GUI interface for input/selection of orbitals/ions projection.</span>
<span class="sd">    - **Parmeters**</span>
<span class="sd">        - rgb        : Default is `True` and generates input for `plotly(quick)_rgb_lines`, if `False` creates input for `quick(plotly)_dos(color)_lines`</span>
<span class="sd">        - html_style : None,`dark_style` or `light_style`.</span>
<span class="sd">        - height     : Height of Grid box.</span>
<span class="sd">    - **Returns**</span>
<span class="sd">        - Tuple(GUI_gridbox,json_in_HTML). Access second one by item.value.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">html_style</span><span class="p">:</span>
        <span class="n">html_style</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="n">sys_info</span> <span class="o">==</span><span class="kc">None</span><span class="p">:</span>
        <span class="n">sys_info</span> <span class="o">=</span> <span class="n">vp</span><span class="o">.</span><span class="n">Dict2Data</span><span class="p">({</span><span class="s1">&#39;fields&#39;</span><span class="p">:[</span><span class="s1">&#39;s&#39;</span><span class="p">],</span><span class="s1">&#39;ElemIndex&#39;</span><span class="p">:[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="s1">&#39;ElemName&#39;</span><span class="p">:[</span><span class="s1">&#39;A&#39;</span><span class="p">]})</span>
    <span class="n">layout</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;30%&#39;</span><span class="p">)</span>
    <span class="n">orbs_w</span>  <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;s&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">},</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>
    <span class="n">orbi_w</span>  <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>
    <span class="n">ions_w</span>  <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;All&#39;</span><span class="p">:[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">]},</span><span class="n">value</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span><span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>
    <span class="n">ioni_w</span>  <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>
    <span class="n">label_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>
    <span class="n">rgb_w</span>   <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Red&#39;</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;Green&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;Blue&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">},</span><span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>
    <span class="n">rgbl_w</span>  <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Color: &#39;</span><span class="p">)</span>
    <span class="n">click_w</span><span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;max-content&#39;</span><span class="p">),</span><span class="n">icon</span><span class="o">=</span><span class="s1">&#39;fa-hand-o-up&#39;</span><span class="p">)</span>
    <span class="n">click_w</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">button_color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span>
    <span class="c1"># Uniform label widths</span>
    <span class="n">l_width</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;20%&#39;</span><span class="p">)</span>
    <span class="n">rgbl_w</span><span class="o">.</span><span class="n">layout</span><span class="o">=</span><span class="n">l_width</span>

    <span class="n">inpro_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="s1">&#39;20px&#39;</span><span class="p">))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">rgb</span><span class="p">:</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;32px&#39;</span><span class="p">)</span>
        <span class="n">add_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">,</span><span class="n">icon</span><span class="o">=</span><span class="s1">&#39;fa-plus-circle&#39;</span><span class="p">)</span>
        <span class="n">del_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">,</span><span class="n">icon</span><span class="o">=</span><span class="s1">&#39;fa-minus-circle&#39;</span><span class="p">)</span>
        <span class="n">add_w</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">button_color</span><span class="o">=</span><span class="s1">&#39;#5AD5D1&#39;</span>
        <span class="n">del_w</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">button_color</span><span class="o">=</span><span class="s1">&#39;#5AD5D1&#39;</span>
        <span class="n">read_box</span> <span class="o">=</span> <span class="p">[</span><span class="n">Label</span><span class="p">(</span><span class="sa">u</span><span class="s2">&quot;Line </span><span class="se">\u00B1</span><span class="s2">: &quot;</span><span class="p">),</span><span class="n">add_w</span><span class="p">,</span><span class="n">del_w</span><span class="p">,</span><span class="n">Label</span><span class="p">(),</span><span class="n">Label</span><span class="p">(),</span><span class="n">click_w</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">read_box</span> <span class="o">=</span> <span class="p">[</span><span class="n">click_w</span><span class="p">]</span>

    <span class="n">in_w</span> <span class="o">=</span> <span class="n">VBox</span><span class="p">([</span><span class="n">ipw</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">html_style</span><span class="p">),</span>
                <span class="n">ipw</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s2">&quot;&lt;h3&gt;Projections&lt;/h3&gt;&quot;</span><span class="p">),</span>
                <span class="n">HBox</span><span class="p">([</span><span class="n">rgbl_w</span><span class="p">,</span><span class="n">rgb_w</span><span class="p">,</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Label: &#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_width</span><span class="p">),</span><span class="n">label_w</span>
                    <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">),</span>
                <span class="n">HBox</span><span class="p">([</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Ions: &#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_width</span><span class="p">),</span><span class="n">ions_w</span><span class="p">,</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;::&gt;&gt;:: &#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_width</span><span class="p">),</span><span class="n">ioni_w</span>
                    <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">),</span>
                <span class="n">HBox</span><span class="p">([</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Orbs: &#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_width</span><span class="p">),</span><span class="n">orbs_w</span><span class="p">,</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;::&gt;&gt;:: &#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_width</span><span class="p">),</span><span class="n">orbi_w</span>
                    <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">),</span>
                <span class="n">HBox</span><span class="p">(</span><span class="n">read_box</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span>
                <span class="p">],</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">px&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">height</span><span class="p">))</span>
                <span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span>

    <span class="n">orbs_w</span><span class="o">.</span><span class="n">options</span><span class="o">=</span> <span class="p">{</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">+</span><span class="s1">&#39;: &#39;</span><span class="o">+</span><span class="n">item</span><span class="p">:</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sys_info</span><span class="o">.</span><span class="n">fields</span><span class="p">)}</span>
    <span class="n">ipw</span><span class="o">.</span><span class="n">dlink</span><span class="p">((</span><span class="n">orbs_w</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">orbi_w</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>

    <span class="n">inds</span> <span class="o">=</span> <span class="n">sys_info</span><span class="o">.</span><span class="n">ElemIndex</span>
    <span class="n">ions_w</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">-</span><span class="si">{}</span><span class="s2">: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">inds</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">inds</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">item</span><span class="p">):</span><span class="s2">&quot;</span><span class="si">{}</span><span class="s2">-</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">inds</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">inds</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">item</span>                             <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sys_info</span><span class="o">.</span><span class="n">ElemName</span><span class="p">)}</span>

    <span class="n">ipw</span><span class="o">.</span><span class="n">dlink</span><span class="p">((</span><span class="n">ions_w</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">),</span> <span class="p">(</span><span class="n">ioni_w</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>


    <span class="k">def</span> <span class="nf">read_pro</span><span class="p">(</span><span class="n">ions_w</span><span class="p">,</span><span class="n">orbi_w</span><span class="p">,</span><span class="n">label_w</span><span class="p">):</span>
        <span class="n">orbs_l</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">orbi_w</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">orbi_w</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="s1">&#39;-&#39;</span> <span class="ow">in</span> <span class="n">o</span><span class="p">:</span>
                    <span class="n">strt</span><span class="p">,</span><span class="n">stop</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
                    <span class="p">[</span><span class="n">orbs_l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">strt</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">orbs_l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">o</span><span class="p">))</span>

        <span class="n">ions_l</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">ioni_w</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">ioni_w</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;,&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="s1">&#39;-&#39;</span> <span class="ow">in</span> <span class="n">o</span><span class="p">:</span>
                    <span class="n">strt</span><span class="p">,</span><span class="n">stop</span> <span class="o">=</span> <span class="n">o</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">)</span>
                    <span class="p">[</span><span class="n">ions_l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">strt</span><span class="p">),</span><span class="nb">int</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">ions_l</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">o</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">label_w</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">label_l</span> <span class="o">=</span> <span class="n">label_w</span><span class="o">.</span><span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">label_l</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">:</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ioni_w</span><span class="o">.</span><span class="n">value</span><span class="p">,</span><span class="n">orbi_w</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ions_l</span><span class="p">,</span><span class="n">orbs_l</span><span class="p">,</span><span class="n">label_l</span>
    <span class="k">if</span> <span class="n">rgb</span><span class="p">:</span>
        <span class="n">elements</span><span class="p">,</span><span class="n">orbs</span><span class="p">,</span><span class="n">labels</span> <span class="o">=</span> <span class="p">[[],[],[]],[[],[],[]],[</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">rgb_w</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;Line 0&quot;</span><span class="p">:</span><span class="mi">0</span><span class="p">}</span>
        <span class="n">rgb_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">rgbl_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;Line: &#39;</span>
        <span class="n">elements</span><span class="p">,</span><span class="n">orbs</span><span class="p">,</span> <span class="n">labels</span> <span class="o">=</span> <span class="p">[[],],[[],],[</span><span class="s1">&#39;&#39;</span><span class="p">,]</span> <span class="c1"># For DOS</span>


    <span class="k">def</span> <span class="nf">read_lines</span><span class="p">(</span><span class="n">click_w</span><span class="p">):</span>

        <span class="c1"># Read Now</span>
        <span class="n">index</span><span class="o">=</span><span class="n">rgb_w</span><span class="o">.</span><span class="n">value</span>
        <span class="n">r_p</span> <span class="o">=</span> <span class="n">read_pro</span><span class="p">(</span><span class="n">ions_w</span><span class="p">,</span><span class="n">orbi_w</span><span class="p">,</span><span class="n">label_w</span><span class="p">)</span>
        <span class="c1"># update</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">elements</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="o">=</span> <span class="n">r_p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">orbs</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>     <span class="o">=</span> <span class="n">r_p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>   <span class="o">=</span> <span class="n">r_p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r_p</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># In case new line added.</span>
            <span class="n">orbs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r_p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r_p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

        <span class="n">max_ind</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rgb_w</span><span class="o">.</span><span class="n">options</span><span class="p">)</span> <span class="c1"># in case a line is deleted.</span>
        <span class="n">_input_</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">elements</span><span class="o">=</span><span class="n">elements</span><span class="p">[:</span><span class="n">max_ind</span><span class="p">],</span><span class="n">orbs</span><span class="o">=</span><span class="n">orbs</span><span class="p">[:</span><span class="n">max_ind</span><span class="p">],</span><span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">[:</span><span class="n">max_ind</span><span class="p">])</span>
        <span class="n">inpro_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">_input_</span><span class="p">,</span><span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

        <span class="c1"># Button feedback.</span>
        <span class="n">click_w</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Got </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rgb_w</span><span class="o">.</span><span class="n">label</span><span class="p">)</span>
        <span class="n">click_w</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">button_color</span> <span class="o">=</span> <span class="s1">&#39;#FFDAB9&#39;</span>
        <span class="n">click_w</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="s1">&#39;check&#39;</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">click_w</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Read Input&quot;</span>
        <span class="n">click_w</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">button_color</span> <span class="o">=</span> <span class="s1">&#39;skyblue&#39;</span>
        <span class="n">click_w</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="s1">&#39;fa-hand-o-up&#39;</span>

    <span class="n">click_w</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">read_lines</span><span class="p">)</span>

    <span class="c1"># Observe output of a line right in box.</span>
    <span class="k">def</span> <span class="nf">see_input</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="c1">#if change:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">rgb_w</span><span class="o">.</span><span class="n">value</span>
        <span class="k">try</span><span class="p">:</span> <span class="c1">#Avoid None and prior update</span>
            <span class="n">ioni_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">elements</span><span class="p">[</span><span class="n">x</span><span class="p">]])</span>
            <span class="n">orbi_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">orbs</span><span class="p">[</span><span class="n">x</span><span class="p">]])</span>
            <span class="n">label_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">labels</span><span class="p">[</span><span class="n">x</span><span class="p">]</span>
            <span class="n">click_w</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rgb_w</span><span class="o">.</span><span class="n">label</span><span class="p">)</span> <span class="c1"># Triggers when line +/- as well.</span>
            <span class="n">click_w</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">button_color</span> <span class="o">=</span> <span class="s1">&#39;#FFDAB9&#39;</span>
            <span class="n">click_w</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="s1">&#39;fa-refresh&#39;</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>

    <span class="n">rgb_w</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">see_input</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>

    <span class="c1"># Add and delete lines</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">rgb</span><span class="p">:</span>
        <span class="k">def</span> <span class="nf">add_line</span><span class="p">(</span><span class="n">add_w</span><span class="p">):</span>
            <span class="n">l_opts</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rgb_w</span><span class="o">.</span><span class="n">options</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span>
            <span class="n">opts</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Line </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">):</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">l_opts</span><span class="p">)}</span>
            <span class="n">rgb_w</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">opts</span>
            <span class="n">rgb_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">l_opts</span> <span class="o">-</span> <span class="mi">1</span>

        <span class="n">add_w</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">add_line</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">del_line</span><span class="p">(</span><span class="n">del_w</span><span class="p">):</span>
            <span class="n">l_opts</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">rgb_w</span><span class="o">.</span><span class="n">options</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span>
            <span class="k">if</span> <span class="n">l_opts</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="c1"># Do not delete last line. just update,otherwise issues.</span>
                <span class="n">opts</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Line </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">):</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">l_opts</span><span class="p">)}</span>
                <span class="n">rgb_w</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="n">opts</span>
                <span class="n">rgb_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">l_opts</span> <span class="o">-</span> <span class="mi">1</span>

        <span class="n">del_w</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">del_line</span><span class="p">)</span>
    <span class="c1"># Finally Link Line number to input button</span>
    <span class="n">ipw</span><span class="o">.</span><span class="n">dlink</span><span class="p">((</span><span class="n">rgb_w</span><span class="p">,</span><span class="s1">&#39;label&#39;</span><span class="p">),(</span><span class="n">click_w</span><span class="p">,</span><span class="s1">&#39;description&#39;</span><span class="p">))</span> <span class="c1"># Link line to input buuton.</span>
    <span class="n">click_w</span><span class="o">.</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Read Input&#39;</span> <span class="c1"># After link is important</span>

    <span class="k">return</span> <span class="n">in_w</span><span class="p">,</span> <span class="n">inpro_w</span></div>

<span class="c1"># Cell</span>
<span class="c1"># Reading data</span>
<span class="k">def</span> <span class="nf">read_data</span><span class="p">(</span><span class="n">tabel_w</span><span class="p">,</span><span class="n">poscar</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span><span class="n">sys_info</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">data_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">tabel_w</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">sys_info</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">data_dict</span><span class="p">[</span><span class="s2">&quot;sys&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sys_info</span><span class="o">.</span><span class="n">SYSTEM</span>
    <span class="k">if</span> <span class="n">poscar</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">data_dict</span><span class="p">[</span><span class="s2">&quot;V&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">poscar</span><span class="o">.</span><span class="n">volume</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">poscar</span><span class="o">.</span><span class="n">basis</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span><span class="mi">5</span><span class="p">)</span>
        <span class="n">data_dict</span><span class="p">[</span><span class="s2">&quot;a&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span>
        <span class="n">data_dict</span><span class="p">[</span><span class="s2">&quot;b&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">b</span>
        <span class="n">data_dict</span><span class="p">[</span><span class="s2">&quot;c&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">c</span>
    <span class="n">tabel_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data_dict</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">data_dict</span> <span class="c1"># for reading in save_data</span>
<span class="c1">#mouse event handler</span>
<span class="k">def</span> <span class="nf">click_data</span><span class="p">(</span><span class="n">sel_en_w</span><span class="p">,</span><span class="n">fermi_w</span><span class="p">,</span><span class="n">tabel_w</span><span class="p">,</span><span class="n">fig</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">handle_click</span><span class="p">(</span><span class="n">trace</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">state</span><span class="p">):</span>
        <span class="k">if</span><span class="p">(</span><span class="n">points</span><span class="o">.</span><span class="n">ys</span><span class="o">!=</span><span class="p">[]):</span>
            <span class="n">data_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">tabel_w</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="n">e_fermi</span> <span class="o">=</span> <span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">fermi_w</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="n">fermi_w</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="mi">0</span><span class="p">)</span>
            <span class="n">val</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="nb">float</span><span class="p">(</span><span class="n">points</span><span class="o">.</span><span class="n">ys</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="o">+</span><span class="n">e_fermi</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">sel_en_w</span><span class="o">.</span><span class="n">options</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">sel_en_w</span><span class="o">.</span><span class="n">value</span> <span class="ow">and</span> <span class="n">key</span> <span class="o">!=</span> <span class="s1">&#39;None&#39;</span><span class="p">:</span>
                    <span class="n">data_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span> <span class="c1"># Assign value back</span>
                <span class="k">if</span> <span class="s1">&#39;Fermi&#39;</span> <span class="ow">in</span> <span class="n">sel_en_w</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                    <span class="n">fermi_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="c1"># change fermi</span>
            <span class="n">tabel_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span><span class="n">indent</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="c1">#data_send(None) #send data to Table</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fig</span><span class="o">.</span><span class="n">data</span><span class="p">)):</span>
        <span class="n">trace</span><span class="o">=</span><span class="n">fig</span><span class="o">.</span><span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">trace</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">handle_click</span><span class="p">)</span>
<span class="c1"># Display Table</span>
<span class="k">def</span> <span class="nf">tabulate_data</span><span class="p">(</span><span class="n">data_dict</span><span class="p">):</span>
    <span class="n">ls</span><span class="p">,</span><span class="n">ds</span><span class="p">,</span><span class="n">ud</span> <span class="o">=</span> <span class="p">[],[],{}</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">data_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">and</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Fermi&#39;</span><span class="p">,</span><span class="s1">&#39;E_gap&#39;</span><span class="p">,</span><span class="s1">&#39;Δ_SO&#39;</span><span class="p">,</span><span class="s1">&#39;sys&#39;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;so_max&#39;</span><span class="p">,</span><span class="s1">&#39;so_min&#39;</span><span class="p">]:</span> <span class="c1"># No need to show in table, but difference required.</span>
                <span class="n">ls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">k</span><span class="p">)</span>
                <span class="n">ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">and</span> <span class="s1">&#39;VBM&#39;</span> <span class="ow">in</span> <span class="n">k</span> <span class="ow">and</span> <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;CBM&#39;</span><span class="p">]:</span>
            <span class="n">ls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;E_gap&#39;</span><span class="p">)</span>
            <span class="n">ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;CBM&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
            <span class="n">ud</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;E_gap&#39;</span><span class="p">:</span><span class="n">ds</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]})</span>
        <span class="k">if</span> <span class="n">v</span> <span class="ow">and</span> <span class="s1">&#39;so_min&#39;</span> <span class="ow">in</span> <span class="n">k</span> <span class="ow">and</span> <span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;so_max&#39;</span><span class="p">]:</span>
            <span class="n">ls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;Δ_SO&#39;</span><span class="p">)</span>
            <span class="n">ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">data_dict</span><span class="p">[</span><span class="s1">&#39;so_max&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">v</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
            <span class="n">ud</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;Δ_SO&#39;</span><span class="p">:</span><span class="n">ds</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]})</span>
    <span class="n">data_dict</span> <span class="o">=</span> <span class="p">{</span><span class="o">**</span><span class="n">data_dict</span><span class="p">,</span><span class="o">**</span><span class="n">ud</span><span class="p">}</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ls</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">ls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
        <span class="n">ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
    <span class="n">tab_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">ls</span><span class="p">[:</span><span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ls</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)],</span><span class="n">ds</span><span class="p">[:</span><span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ls</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">)],</span><span class="n">ls</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ls</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">):],</span><span class="n">ds</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ls</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">):]]</span>

    <span class="n">htm_string</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;&lt;style&gt;table {border-collapse: collapse !important;</span>
<span class="s2">      min-width: 100% !important;</span>
<span class="s2">      border: 1px solid gray !important;</span>
<span class="s2">      margin: 1px 1px 1px 1px !important;</span>
<span class="s2">      font-size: small !important;</span>
<span class="s2">      font-family: &quot;Times New Roman&quot;, &quot;Times&quot;, &quot;serif&quot; !important;}</span>
<span class="s2">      th, td {text-align: center !important;</span>
<span class="s2">      border: 1px solid gray !important;</span>
<span class="s2">      padding: 0px 8px 0px 8px !important;}</span>
<span class="s2">      tr {width: 100% !important;}</span>
<span class="s2">      tr:nth-child(odd) {font-weight:bold !important;}</span>
<span class="s2">      &lt;/style&gt;&quot;&quot;&quot;</span>
    <span class="n">htm_string</span> <span class="o">+=</span> <span class="s2">&quot;&lt;table&gt;&lt;tr&gt;</span><span class="si">{}</span><span class="s2">&lt;/tr&gt;&lt;/table&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span> <span class="s1">&#39;&lt;/tr&gt;&lt;tr&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
                   <span class="s1">&#39;&lt;td&gt;</span><span class="si">{}</span><span class="s1">&lt;/td&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;&lt;/td&gt;&lt;td&gt;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">row</span><span class="p">))</span> <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">tab_data</span><span class="p">)</span> <span class="p">)</span>
    <span class="k">return</span> <span class="n">htm_string</span><span class="p">,</span> <span class="n">data_dict</span>

<span class="c1"># Send Data</span>
<span class="k">def</span> <span class="nf">save_data</span><span class="p">(</span><span class="n">out_w1</span><span class="p">,</span><span class="n">data_dict</span><span class="p">):</span>
    <span class="n">out_f</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="s1">&#39;result.json&#39;</span><span class="p">)</span>
    <span class="n">vp</span><span class="o">.</span><span class="n">dump_dict</span><span class="p">(</span><span class="n">data_dict</span><span class="p">,</span><span class="n">dump_to</span><span class="o">=</span><span class="s1">&#39;json&#39;</span><span class="p">,</span><span class="n">outfile</span><span class="o">=</span><span class="n">out_f</span><span class="p">)</span>


<span class="c1"># Cell</span>
<span class="k">def</span> <span class="nf">color_toggle</span><span class="p">(</span><span class="n">tog_w</span><span class="p">,</span><span class="n">fig</span><span class="p">,</span><span class="n">rd_btn</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">tog_w</span><span class="o">.</span><span class="n">description</span><span class="o">==</span><span class="s1">&#39;Colorize&#39;</span><span class="p">:</span>
        <span class="n">tog_w</span><span class="o">.</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Monochrome&#39;</span>
        <span class="k">with</span> <span class="n">fig</span><span class="o">.</span><span class="n">batch_animate</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">rd_btn</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;DOS&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">fig</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">fill</span><span class="o">=</span><span class="s1">&#39;tozeroy&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">fig</span><span class="o">.</span><span class="n">data</span><span class="p">[:</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;markers+lines&#39;</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;rgba(222,222,220,0.1)&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">tog_w</span><span class="o">.</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Colorize&#39;</span>
        <span class="k">with</span> <span class="n">fig</span><span class="o">.</span><span class="n">batch_animate</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">rd_btn</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;DOS&#39;</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">fig</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">fill</span><span class="o">=</span><span class="kc">None</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">trace</span> <span class="ow">in</span> <span class="n">fig</span><span class="o">.</span><span class="n">data</span><span class="p">[:</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;lines&#39;</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">width</span><span class="o">=</span><span class="mf">1.5</span>
                    <span class="n">trace</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span>


<span class="c1"># Cell</span>
<span class="k">def</span> <span class="nf">clear_cache</span><span class="p">(</span><span class="n">out_w1</span><span class="p">,</span><span class="n">cache_w</span><span class="p">,</span><span class="n">tabel_w</span><span class="p">):</span>
    <span class="n">pwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="s1">&#39;Table&#39;</span> <span class="ow">in</span> <span class="n">cache_w</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="n">j_s</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">tabel_w</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="c1"># Avoid deleting V,a,b,Fermi</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;VBM&#39;</span><span class="p">,</span><span class="s1">&#39;CBM&#39;</span><span class="p">,</span><span class="s1">&#39;so_max&#39;</span><span class="p">,</span><span class="s1">&#39;so_min&#39;</span><span class="p">]:</span>
            <span class="n">j_s</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
        <span class="n">tabel_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">j_s</span><span class="p">)</span>
    <span class="k">if</span> <span class="s1">&#39;PWD&#39;</span> <span class="ow">in</span> <span class="n">cache_w</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pwd</span><span class="p">,</span><span class="s1">&#39;sys_info.pickle&#39;</span><span class="p">))</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">pwd</span><span class="p">,</span><span class="s1">&#39;vasprun.pickle&#39;</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
    <span class="k">if</span> <span class="s1">&#39;All&#39;</span> <span class="ow">in</span> <span class="n">cache_w</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">value</span> <span class="ow">in</span> <span class="n">out_w1</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">p_throw</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p_throw</span><span class="p">,</span><span class="s1">&#39;vasprun.pickle&#39;</span><span class="p">))</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">p_throw</span><span class="p">,</span><span class="s1">&#39;sys_info.pickle&#39;</span><span class="p">))</span>
            <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>

<span class="c1"># Cell</span>
<span class="k">def</span> <span class="nf">matplotlib_code</span><span class="p">(</span><span class="n">rd_btn</span><span class="p">,</span><span class="n">out_w1</span><span class="p">,</span><span class="n">dict_html</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="n">path</span> <span class="o">=</span> <span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">path</span><span class="o">=</span><span class="s1">&#39;&#39;</span>
    <span class="k">if</span> <span class="s1">&#39;DOS&#39;</span> <span class="ow">in</span> <span class="n">rd_btn</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
        <span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;pp.quick_dos_lines&#39;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">command</span> <span class="o">=</span> <span class="s1">&#39;pp.quick_rgb_lines&#39;</span>
    <span class="n">string</span> <span class="o">=</span> <span class="s2">&quot;import matplotlib.pyplot as plt, pivotpy as pp&quot;</span>
    <span class="n">string</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">path = &#39;</span><span class="si">{}</span><span class="s2">&#39;</span><span class="se">\n</span><span class="s2">args_dict = </span><span class="si">{}</span><span class="se">\n</span><span class="s2">ax = pp.init_figure()&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">dict_html</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
    <span class="n">string</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="si">{}</span><span class="s2">(path_evr=path,ax=ax,**args_dict)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">command</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">string</span>

<span class="c1"># Cell</span>
<span class="k">def</span> <span class="nf">generate_summary</span><span class="p">(</span><span class="n">paths_list</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="c1"># Make Data Frame</span>
    <span class="n">result_paths</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">common_prefix</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1">#placeholder</span>
    <span class="k">if</span> <span class="n">paths_list</span><span class="p">:</span>
        <span class="n">common_prefix</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">commonprefix</span><span class="p">(</span><span class="n">paths_list</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">paths_list</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">item</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                <span class="n">result_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">item</span><span class="p">,</span><span class="s1">&#39;result.json&#39;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">item</span> <span class="ow">and</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
                <span class="n">result_paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">item</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="s1">&#39;result.json&#39;</span><span class="p">))</span>
    <span class="n">result_dicts</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">result_paths</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span> <span class="n">_p_</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">path</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">common_prefix</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">except</span><span class="p">:</span> <span class="n">_p_</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1">#In current directory</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span>
            <span class="n">l_d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="n">l_d</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;rel_path&#39;</span><span class="p">:</span><span class="n">_p_</span><span class="p">})</span>
            <span class="n">result_dicts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">l_d</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>
    <span class="n">out_dict</span> <span class="o">=</span> <span class="p">{}</span> <span class="c1"># placeholder</span>
    <span class="k">if</span> <span class="n">result_dicts</span><span class="p">:</span>
        <span class="n">out_dict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">k</span><span class="p">:[</span><span class="n">v</span><span class="p">]</span> <span class="k">if</span> <span class="n">v</span> <span class="k">else</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">result_dicts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()})</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">result_dicts</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="n">v</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span> <span class="k">else</span> <span class="n">v</span>
                    <span class="k">try</span><span class="p">:</span> <span class="n">out_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                    <span class="k">except</span><span class="p">:</span>
                        <span class="n">out_dict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">k</span><span class="p">:[</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span> <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">)]})</span> <span class="c1">#if not key before, add to all previous</span>
                        <span class="n">out_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="c1"># Then append for current value</span>
            <span class="c1"># If next dictionary does not have key</span>
            <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">out_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">d</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">out_dict</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span> <span class="n">out_dict</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;Fermi&#39;</span><span class="p">,</span><span class="kc">None</span><span class="p">)</span> <span class="c1"># Remove Fermi as not necessary</span>
    <span class="k">except</span><span class="p">:</span> <span class="k">pass</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">out_dict</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">common_prefix</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s2">&quot;Root Path: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">common_prefix</span><span class="p">))</span> <span class="c1"># return with header</span>
    <span class="k">return</span> <span class="n">df</span> <span class="c1">#return simple</span>


<span class="c1"># Cell</span>
<div class="viewcode-block" id="show_app"><a class="viewcode-back" href="../../api.html#pivotpy.widgets.show_app">[docs]</a><span class="k">def</span> <span class="nf">show_app</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Displays a GUI for visulaizing and manipulating output of vasp calculations. It only has one argument `height` which sets `min-height` of the app.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tab</span> <span class="o">=</span>  <span class="n">ipw</span><span class="o">.</span><span class="n">Tab</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">min_height</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">{}</span><span class="s1">px&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">height</span><span class="p">),</span><span class="n">max_height</span><span class="o">=</span><span class="s1">&#39;100vh&#39;</span><span class="p">,</span><span class="n">min_width</span><span class="o">=</span><span class="s1">&#39;700px&#39;</span><span class="p">,</span><span class="n">max_width</span><span class="o">=</span><span class="s1">&#39;100vw&#39;</span><span class="p">)</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span> <span class="c1"># Main Tab</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">item</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="s1">&#39;Home&#39;</span><span class="p">,</span><span class="s1">&#39;Graphs&#39;</span><span class="p">,</span><span class="s1">&#39;STD(out/err)&#39;</span><span class="p">]):</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">item</span><span class="p">)</span>

    <span class="n">l_btn</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;max-content&#39;</span><span class="p">)</span> <span class="c1"># For button</span>
    <span class="n">out_tab</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>
    <span class="n">out_tab</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;output&#39;</span><span class="p">)</span>
    <span class="n">gui1</span><span class="p">,</span><span class="n">out_w1</span> <span class="o">=</span> <span class="n">get_files_gui</span><span class="p">()</span>
    <span class="n">load_btn</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Load Data&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_btn</span><span class="p">)</span>
    <span class="n">graph_btn</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Load Graph&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_btn</span><span class="p">)</span>
    <span class="n">rd_btn</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Bands&#39;</span><span class="p">,</span><span class="s1">&#39;DOS&#39;</span><span class="p">],</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;Bands&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span> <span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;80px&#39;</span><span class="p">))</span>

    <span class="n">tabel_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;sys&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;V&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;Fermi&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                             <span class="s1">&#39;VBM&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;CBM&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;so_max&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;so_min&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">}))</span>
    <span class="n">l_out</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;20%&#39;</span><span class="p">)</span>
    <span class="n">b_out</span> <span class="o">=</span> <span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;30%&#39;</span><span class="p">)</span>
    <span class="c1"># RGB extra input</span>
    <span class="n">kticks_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">b_out</span><span class="p">)</span>
    <span class="n">ktickv_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">b_out</span><span class="p">)</span>
    <span class="n">kjoin_w</span>  <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">b_out</span><span class="p">)</span>
    <span class="n">elim_w</span>   <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">b_out</span><span class="p">)</span>
    <span class="n">sel_en_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Fermi&#39;</span><span class="p">,</span><span class="s1">&#39;VBM&#39;</span><span class="p">,</span><span class="s1">&#39;CBM&#39;</span><span class="p">,</span><span class="s1">&#39;so_max&#39;</span><span class="p">,</span><span class="s1">&#39;so_min&#39;</span><span class="p">,</span><span class="s1">&#39;None&#39;</span><span class="p">],</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;None&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">b_out</span><span class="p">)</span>
    <span class="n">fermi_w</span>  <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">b_out</span><span class="p">)</span>
    <span class="n">theme_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Default&#39;</span><span class="p">,</span><span class="s1">&#39;Light&#39;</span><span class="p">,</span><span class="s1">&#39;Dark&#39;</span><span class="p">],</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;Light&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_btn</span><span class="p">)</span>
    <span class="n">theme_html</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">light_style</span><span class="p">)</span> <span class="c1"># To change theme.</span>
    <span class="n">dict_html</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({}))</span> <span class="c1"># To store Fig args dictionary</span>

    <span class="n">view_tab_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">HTML</span><span class="p">()</span>
    <span class="nd">@out_tab</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">clear_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">update_table</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">data_dict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">tabel_w</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
        <span class="n">htm_string</span><span class="p">,</span><span class="n">data_dict</span> <span class="o">=</span> <span class="n">tabulate_data</span><span class="p">(</span><span class="n">data_dict</span><span class="p">)</span>
        <span class="n">view_tab_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">htm_string</span>
        <span class="n">save_data</span><span class="p">(</span><span class="n">out_w1</span><span class="p">,</span><span class="n">data_dict</span><span class="p">)</span> <span class="c1"># save data as well.</span>
    <span class="n">tabel_w</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_table</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
    <span class="c1"># Also update when folder chnages for fast view</span>

    <span class="k">if</span> <span class="n">rd_btn</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;DOS&#39;</span><span class="p">:</span>
        <span class="n">gui2</span><span class="p">,</span><span class="n">out_w2</span> <span class="o">=</span> <span class="n">get_input_gui</span><span class="p">(</span><span class="n">rgb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">gui2</span><span class="p">,</span><span class="n">out_w2</span> <span class="o">=</span> <span class="n">get_input_gui</span><span class="p">(</span><span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="c1"># Load any previous computed result just by going into folder.</span>
    <span class="nd">@out_tab</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">clear_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">load_previous</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">r_f</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s1">&#39;result.json&#39;</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">r_f</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                 <span class="n">tabel_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">())</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Previous Analysis loaded in Table for </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Previous Analysis does not exist for </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
            <span class="n">tabel_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">({</span><span class="s1">&#39;sys&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;V&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;a&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;b&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;c&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;Fermi&#39;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
                             <span class="s1">&#39;VBM&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;CBM&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;so_max&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;so_min&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">})</span>
    <span class="n">out_w1</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">load_previous</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
    <span class="c1"># Load Data on button click only</span>
    <span class="nd">@out_tab</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">clear_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_load</span><span class="p">(</span><span class="n">btn</span><span class="p">):</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">selected_index</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">load_btn</span><span class="o">.</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Loading ...&#39;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">r_f</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s1">&#39;result.json&#39;</span><span class="p">)</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">r_f</span><span class="p">,</span><span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                 <span class="n">tabel_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">())</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="n">file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="s1">&#39;sys_info.pickle&#39;</span><span class="p">)</span>
            <span class="n">sys_info</span> <span class="o">=</span> <span class="n">vp</span><span class="o">.</span><span class="n">load_from_dump</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Cache Loaded&#39;</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="n">f</span><span class="p">)</span>
                                <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Bands.txt&#39;</span><span class="p">,</span><span class="s1">&#39;Projection.txt&#39;</span><span class="p">,</span><span class="s1">&#39;SysInfo.py&#39;</span><span class="p">]]</span>
            <span class="n">logic</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">]</span>
            <span class="k">if</span> <span class="kc">False</span> <span class="ow">in</span> <span class="n">logic</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Loading from Python ...&#39;</span><span class="p">)</span>
                <span class="n">evr</span> <span class="o">=</span> <span class="n">vp</span><span class="o">.</span><span class="n">export_vasprun</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Caching From: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">))</span> <span class="c1">#Cache result</span>
                <span class="n">ifile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="s1">&#39;sys_info.pickle&#39;</span><span class="p">)</span>
                <span class="n">vfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="s1">&#39;vasprun.pickle&#39;</span><span class="p">)</span>
                <span class="n">vp</span><span class="o">.</span><span class="n">dump_dict</span><span class="p">(</span><span class="n">evr</span><span class="o">.</span><span class="n">sys_info</span><span class="p">,</span><span class="n">outfile</span><span class="o">=</span><span class="n">ifile</span><span class="p">)</span>
                <span class="n">vp</span><span class="o">.</span><span class="n">dump_dict</span><span class="p">(</span><span class="n">evr</span><span class="p">,</span><span class="n">outfile</span><span class="o">=</span><span class="n">vfile</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Loading from Powershell (No Cache Required)...&#39;</span><span class="p">)</span>
                <span class="n">evr</span> <span class="o">=</span> <span class="n">vp</span><span class="o">.</span><span class="n">load_export</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="n">sys_info</span> <span class="o">=</span> <span class="n">evr</span><span class="o">.</span><span class="n">sys_info</span> <span class="c1"># required here.</span>
            <span class="n">_rrdd_</span> <span class="o">=</span> <span class="n">read_data</span><span class="p">(</span><span class="n">tabel_w</span><span class="p">,</span><span class="n">evr</span><span class="o">.</span><span class="n">poscar</span><span class="p">,</span><span class="n">sys_info</span><span class="p">)</span> <span class="c1"># Update Table data on load</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done&#39;</span><span class="p">)</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">selected_index</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="n">rd_btn</span><span class="o">.</span><span class="n">value</span><span class="o">==</span><span class="s1">&#39;DOS&#39;</span><span class="p">:</span>
            <span class="n">tmp_ui</span><span class="p">,</span><span class="n">__</span> <span class="o">=</span> <span class="n">get_input_gui</span><span class="p">(</span><span class="n">rgb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span><span class="n">sys_info</span><span class="o">=</span><span class="n">sys_info</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">tmp_ui</span><span class="p">,</span><span class="n">__</span> <span class="o">=</span> <span class="n">get_input_gui</span><span class="p">(</span><span class="n">rgb</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">sys_info</span><span class="o">=</span><span class="n">sys_info</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">gui2</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">tmp_ui</span><span class="o">.</span><span class="n">children</span>
        <span class="n">__</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">out_w2</span><span class="o">.</span><span class="n">value</span> <span class="c1"># keep values</span>
        <span class="n">ipw</span><span class="o">.</span><span class="n">dlink</span><span class="p">((</span><span class="n">__</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">),(</span><span class="n">out_w2</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">))</span>
        <span class="n">load_btn</span><span class="o">.</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Load Data&#39;</span>

    <span class="n">load_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">on_load</span><span class="p">)</span>
    <span class="c1"># Figure</span>
    <span class="n">fig</span> <span class="o">=</span> <span class="n">go</span><span class="o">.</span><span class="n">FigureWidget</span><span class="p">()</span>
    <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">autosize</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">xyt_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Text</span><span class="p">()</span>
    <span class="nd">@out_tab</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">clear_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">update_xyt</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">xyt_w</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">xyt_text</span> <span class="o">=</span> <span class="n">xyt_w</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">update_xaxes</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">xyt_text</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">update_yaxes</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">xyt_text</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">xyt_text</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="k">except</span><span class="p">:</span> <span class="k">pass</span> <span class="c1">#do nothing else</span>
    <span class="n">xyt_w</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_xyt</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>
    <span class="n">edit_box</span> <span class="o">=</span> <span class="n">HBox</span><span class="p">([</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;X,Y,Title:&#39;</span><span class="p">),</span><span class="n">xyt_w</span><span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span>
    <span class="c1"># Monochrome/ Colorize</span>
    <span class="n">tog_w</span><span class="o">=</span><span class="n">ipw</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Monochrome&#39;</span><span class="p">,</span><span class="n">button_style</span><span class="o">=</span><span class="s1">&#39;primary&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_btn</span><span class="p">)</span>
    <span class="nd">@out_tab</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">clear_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">tog_b</span><span class="p">(</span><span class="n">tog_w</span><span class="p">):</span>
        <span class="n">color_toggle</span><span class="p">(</span><span class="n">tog_w</span><span class="p">,</span><span class="n">fig</span><span class="p">,</span><span class="n">rd_btn</span><span class="p">)</span>
    <span class="n">tog_w</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">tog_b</span><span class="p">)</span>

    <span class="c1"># Save Offline</span>
    <span class="n">save_fig_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Save Fig&#39;</span><span class="p">,</span><span class="n">icon</span><span class="o">=</span><span class="s1">&#39;fa-download&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_btn</span><span class="p">)</span>
    <span class="nd">@out_tab</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">clear_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">save_connected</span><span class="p">(</span><span class="n">btn</span><span class="p">):</span>
        <span class="n">s_p</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">s_p</span><span class="p">,</span><span class="s1">&#39;ConnectedFig.html&#39;</span><span class="p">)</span>
        <span class="n">views</span> <span class="o">=</span> <span class="n">VBox</span><span class="p">([</span><span class="n">theme_html</span><span class="p">,</span><span class="n">fig</span><span class="p">,</span><span class="n">view_tab_w</span><span class="p">],</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;500px&#39;</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="s1">&#39;490px&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span>
        <span class="n">embed_minimal_html</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">views</span><span class="o">=</span><span class="p">[</span><span class="n">views</span><span class="p">],</span> <span class="n">state</span><span class="o">=</span><span class="n">dependency_state</span><span class="p">([</span><span class="n">views</span><span class="p">]))</span>
    <span class="n">save_fig_w</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">save_connected</span><span class="p">)</span>

    <span class="n">fig_otions</span> <span class="o">=</span> <span class="n">HBox</span><span class="p">([</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Options:&#39;</span><span class="p">),</span><span class="n">save_fig_w</span><span class="p">,</span><span class="n">tog_w</span><span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span>

    <span class="c1"># Habdle cache</span>
    <span class="n">cache_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Table Data&#39;</span><span class="p">,</span><span class="s1">&#39;PWD Cache&#39;</span><span class="p">,</span><span class="s1">&#39;All Cache&#39;</span><span class="p">,</span><span class="s1">&#39;None&#39;</span><span class="p">],</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;None&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">b_out</span><span class="p">)</span>
    <span class="n">confirm_btn</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Confirm Delete&#39;</span><span class="p">,</span><span class="n">button_style</span><span class="o">=</span><span class="s1">&#39;danger&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_btn</span><span class="p">)</span>
    <span class="nd">@out_tab</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">clear_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">deleter</span><span class="p">(</span><span class="n">btn</span><span class="p">):</span>
        <span class="n">confirm_btn</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Deleting ...&#39;</span>
        <span class="k">if</span> <span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Deleting Selected Cache...&#39;</span><span class="p">)</span>
            <span class="n">clear_cache</span><span class="p">(</span><span class="n">out_w1</span><span class="p">,</span><span class="n">cache_w</span><span class="p">,</span><span class="n">tabel_w</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done&#39;</span><span class="p">)</span>
        <span class="n">confirm_btn</span><span class="o">.</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Confirm Delete&#39;</span>

    <span class="n">confirm_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">deleter</span><span class="p">)</span>

    <span class="n">mpl_btn</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Grenerate Matplotib Code&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_btn</span><span class="p">)</span>
    <span class="nd">@out_tab</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">clear_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">mpl_code</span><span class="p">(</span><span class="n">btn</span><span class="p">):</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">selected_index</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">display</span><span class="p">(</span><span class="n">ipw</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s2">&quot;&lt;h3&gt;Copy code below and run&lt;/h3&gt;&quot;</span><span class="p">))</span>
        <span class="n">mpl_btn</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Generating...&#39;</span>
        <span class="n">string</span> <span class="o">=</span> <span class="n">matplotlib_code</span><span class="p">(</span><span class="n">rd_btn</span><span class="p">,</span><span class="n">out_w1</span><span class="p">,</span><span class="n">dict_html</span><span class="p">)</span>
        <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s2">&quot;```python</span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">```&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">string</span><span class="p">)))</span>
        <span class="n">mpl_btn</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;See STD(out/err) Tab&#39;</span>
        <span class="n">mpl_btn</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">button_color</span> <span class="o">=</span> <span class="s1">&#39;#FFDAB9&#39;</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
        <span class="n">mpl_btn</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Grenerate Matplotib Code&#39;</span>
        <span class="n">mpl_btn</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">button_color</span> <span class="o">=</span> <span class="s1">&#39;skyblue&#39;</span>
    <span class="n">mpl_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">mpl_code</span><span class="p">)</span>

    <span class="c1">#Summary generator</span>
    <span class="n">summary_btn</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Project Summary&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_btn</span><span class="p">)</span>
    <span class="nd">@out_tab</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">clear_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">df_out</span><span class="p">(</span><span class="n">btn</span><span class="p">):</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">selected_index</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">summary_btn</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;See STD(out/err) Tab&#39;</span>
        <span class="n">paths</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">out_w1</span><span class="o">.</span><span class="n">options</span><span class="o">.</span><span class="n">items</span><span class="p">()]</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">generate_summary</span><span class="p">(</span><span class="n">paths_list</span><span class="o">=</span><span class="n">paths</span><span class="p">)</span>
        <span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Generate above dataframe by code below:&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;_______________________________________&#39;</span><span class="p">)</span>
        <span class="n">_code</span> <span class="o">=</span> <span class="s2">&quot;import pivotpy as pp</span><span class="se">\n</span><span class="s2">paths = [&#39;</span><span class="si">{}</span><span class="s2">&#39;]</span><span class="se">\n</span><span class="s2">df = pp.generate_summary(paths_list=paths)</span><span class="se">\n</span><span class="s2">df&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;&#39;,</span><span class="se">\n</span><span class="s2">         &#39;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\\</span><span class="s1">&#39;</span><span class="p">,</span><span class="s1">&#39;/&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">]))</span>
        <span class="n">_code</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">#ax = pp.init_figure()</span><span class="se">\n</span><span class="s2">#df.plot(ax=ax,x=&#39;sys&#39;,y=[&#39;V&#39;,&#39;a&#39;])&quot;</span>
        <span class="n">display</span><span class="p">(</span><span class="n">Markdown</span><span class="p">(</span><span class="s2">&quot;```python</span><span class="se">\n</span><span class="si">{}</span><span class="se">\n</span><span class="s2">```&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_code</span><span class="p">)))</span>
        <span class="n">summary_btn</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Project Summary&#39;</span>

    <span class="n">summary_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">df_out</span><span class="p">)</span>

    <span class="n">summary_box</span> <span class="o">=</span> <span class="n">HBox</span><span class="p">([</span><span class="n">summary_btn</span><span class="p">,</span><span class="n">mpl_btn</span><span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span>

    <span class="n">cache_box</span> <span class="o">=</span> <span class="n">HBox</span><span class="p">([</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Delete Cache:&#39;</span><span class="p">),</span><span class="n">cache_w</span><span class="p">,</span><span class="n">confirm_btn</span><span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span>

    <span class="n">style_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;plotly&quot;</span><span class="p">,</span> <span class="s2">&quot;plotly_white&quot;</span><span class="p">,</span> <span class="s2">&quot;plotly_dark&quot;</span><span class="p">,</span> <span class="s2">&quot;ggplot2&quot;</span><span class="p">,</span> <span class="s2">&quot;seaborn&quot;</span><span class="p">,</span> <span class="s2">&quot;simple_white&quot;</span><span class="p">,</span> <span class="s2">&quot;none&quot;</span><span class="p">],</span><span class="n">layout</span><span class="o">=</span><span class="n">l_btn</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_style</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="n">style_w</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="n">style_w</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_style</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>


    <span class="n">points_box</span> <span class="o">=</span> <span class="n">HBox</span><span class="p">([</span><span class="n">Box</span><span class="p">([</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;E Type:&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_out</span><span class="p">),</span><span class="n">sel_en_w</span><span class="p">,</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;E-Fermi:&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_out</span><span class="p">),</span><span class="n">fermi_w</span>
                    <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">),</span><span class="n">graph_btn</span>
                    <span class="p">],</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span>
    <span class="n">in_box</span> <span class="o">=</span> <span class="n">VBox</span><span class="p">([</span><span class="n">gui2</span><span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span>
    <span class="n">top_right</span> <span class="o">=</span> <span class="n">HBox</span><span class="p">([</span><span class="n">graph_btn</span><span class="p">,</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Style:&#39;</span><span class="p">),</span><span class="n">style_w</span><span class="p">,</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Theme:&#39;</span><span class="p">),</span><span class="n">theme_w</span>
                    <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span>
    <span class="n">fig_box</span> <span class="o">=</span> <span class="n">Box</span><span class="p">([</span><span class="n">fig</span><span class="p">],</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">min_height</span><span class="o">=</span><span class="s1">&#39;380px&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span>
    <span class="n">right_box</span> <span class="o">=</span> <span class="n">VBox</span><span class="p">([</span>
                <span class="n">top_right</span><span class="p">,</span><span class="n">fig_box</span>
                <span class="p">],</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">min_width</span><span class="o">=</span><span class="s1">&#39;60%&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_theme</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="s1">&#39;Dark&#39;</span> <span class="ow">in</span> <span class="n">theme_w</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">style_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;plotly_dark&#39;</span>
            <span class="n">theme_html</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">dark_style</span>
        <span class="k">elif</span> <span class="s1">&#39;Light&#39;</span> <span class="ow">in</span> <span class="n">theme_w</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">style_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;ggplot2&#39;</span>
            <span class="n">theme_html</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">light_style</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">style_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;plotly&#39;</span>
            <span class="n">theme_html</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
    <span class="n">theme_w</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_theme</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_box</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">rd_btn</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;Bands&#39;</span><span class="p">:</span>
            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">gui2</span><span class="p">,</span><span class="n">VBox</span><span class="p">([</span>
                    <span class="n">HBox</span><span class="p">([</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Ticks At: &#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_out</span><span class="p">),</span><span class="n">kticks_w</span><span class="p">,</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Labels: &#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_out</span><span class="p">),</span><span class="n">ktickv_w</span>
                        <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">),</span>
                    <span class="n">HBox</span><span class="p">([</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Join At: &#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_out</span><span class="p">),</span><span class="n">kjoin_w</span><span class="p">,</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;E Range: &#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_out</span><span class="p">),</span><span class="n">elim_w</span>
                        <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span>
                    <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)]</span>
            <span class="n">right_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">top_right</span><span class="p">,</span><span class="n">fig_box</span><span class="p">,</span><span class="n">points_box</span><span class="p">,</span><span class="n">view_tab_w</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">childs</span> <span class="o">=</span> <span class="p">[</span><span class="n">gui2</span><span class="p">,</span><span class="n">HBox</span><span class="p">([</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;E Range:&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_out</span><span class="p">),</span><span class="n">elim_w</span><span class="p">,</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;E-Fermi:&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_out</span><span class="p">),</span><span class="n">fermi_w</span>
                                    <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)]</span>
            <span class="n">right_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">top_right</span><span class="p">,</span><span class="n">fig_box</span><span class="p">,</span><span class="n">view_tab_w</span><span class="p">]</span>
            <span class="n">sel_en_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span> <span class="c1"># no scatter collection in DOS.</span>

        <span class="n">in_box</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="n">childs</span>

    <span class="n">_</span> <span class="o">=</span> <span class="n">update_box</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c1"># initialize box</span>
    <span class="n">rd_btn</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">update_box</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">)</span>

    <span class="n">upper_box</span> <span class="o">=</span> <span class="n">VBox</span><span class="p">([</span>
                <span class="n">HBox</span><span class="p">([</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;File:&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;50px&#39;</span><span class="p">)),</span><span class="n">out_w1</span>
                    <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">),</span>
                <span class="n">HBox</span><span class="p">([</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;View:&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;50px&#39;</span><span class="p">)),</span><span class="n">rd_btn</span><span class="p">,</span><span class="n">load_btn</span>
                    <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span>
                <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span>
    <span class="n">left_box</span> <span class="o">=</span> <span class="n">VBox</span><span class="p">([</span><span class="n">upper_box</span><span class="p">,</span><span class="n">in_box</span><span class="p">,</span><span class="n">edit_box</span><span class="p">,</span><span class="n">fig_otions</span><span class="p">,</span> <span class="n">cache_box</span><span class="p">,</span><span class="n">summary_box</span><span class="p">],</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">max_width</span><span class="o">=</span><span class="s1">&#39;40%&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span>

    <span class="c1"># Garph</span>
    <span class="nd">@out_tab</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">clear_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">update_graph</span><span class="p">(</span><span class="n">btn</span><span class="p">):</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">selected_index</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="n">out_w2</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="n">fig</span><span class="o">.</span><span class="n">data</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">graph_btn</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;loading pickle...&#39;</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Trying to Load Cache for Graph ...&#39;</span><span class="p">)</span>
                <span class="n">file</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="s1">&#39;vasprun.pickle&#39;</span><span class="p">)</span>
                <span class="n">graph_btn</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="n">file</span>
                <span class="n">evr</span> <span class="o">=</span> <span class="n">vp</span><span class="o">.</span><span class="n">load_from_dump</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="n">graph_btn</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;loading export...&#39;</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;No cache found. Loading from file </span><span class="si">{}</span><span class="s1"> ...&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
                <span class="n">files</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="n">f</span><span class="p">)</span>
                                <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;Bands.txt&#39;</span><span class="p">,</span><span class="s1">&#39;Projection.txt&#39;</span><span class="p">,</span><span class="s1">&#39;SysInfo.py&#39;</span><span class="p">]]</span>
                <span class="n">logic</span> <span class="o">=</span> <span class="p">[</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">files</span><span class="p">]</span>
                <span class="k">if</span> <span class="kc">False</span> <span class="ow">in</span> <span class="n">logic</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Loading from Python ...&#39;</span><span class="p">)</span>
                    <span class="n">evr</span> <span class="o">=</span> <span class="n">vp</span><span class="o">.</span><span class="n">export_vasprun</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Loading from Powershell ...&#39;</span><span class="p">)</span>
                    <span class="n">evr</span> <span class="o">=</span> <span class="n">vp</span><span class="o">.</span><span class="n">load_export</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Done&#39;</span><span class="p">)</span>
            <span class="n">graph_btn</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;Load Graph&#39;</span>
            <span class="n">_rrdd_</span> <span class="o">=</span> <span class="n">read_data</span><span class="p">(</span><span class="n">tabel_w</span><span class="p">,</span><span class="n">evr</span><span class="o">.</span><span class="n">poscar</span><span class="p">,</span><span class="n">evr</span><span class="o">.</span><span class="n">sys_info</span><span class="p">)</span> <span class="c1"># Update Table data</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">fermi_w</span><span class="o">.</span><span class="n">value</span><span class="p">:</span> <span class="c1">#Read Only if not in box.</span>
                <span class="n">fermi_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">evr</span><span class="o">.</span><span class="n">sys_info</span><span class="o">.</span><span class="n">E_Fermi</span><span class="p">)</span> <span class="c1"># E_Fermi</span>
            <span class="c1"># Args of Graph function</span>
            <span class="n">argdict</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">out_w2</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
            <span class="n">argdict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;E_Fermi&#39;</span><span class="p">:(</span><span class="nb">float</span><span class="p">(</span><span class="n">fermi_w</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="k">if</span> <span class="n">fermi_w</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)})</span>
            <span class="n">argdict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;elim&#39;</span><span class="p">:([</span><span class="nb">float</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">elim_w</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span> <span class="k">if</span> <span class="n">elim_w</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)})</span>
            <span class="k">if</span> <span class="n">rd_btn</span><span class="o">.</span><span class="n">value</span> <span class="o">==</span> <span class="s1">&#39;Bands&#39;</span><span class="p">:</span>
                <span class="n">argdict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;joinPathAt&#39;</span><span class="p">:([</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kjoin_w</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>
                                            <span class="k">if</span> <span class="n">kjoin_w</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="kc">None</span><span class="p">)})</span>
                <span class="n">argdict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;xt_indices&#39;</span><span class="p">:([</span><span class="nb">int</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">kticks_w</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>
                                            <span class="k">if</span> <span class="n">kticks_w</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">])})</span>
                <span class="n">argdict</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;xt_labels&#39;</span><span class="p">:([</span><span class="n">v</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">ktickv_w</span><span class="o">.</span><span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)]</span>
                                            <span class="k">if</span> <span class="n">ktickv_w</span><span class="o">.</span><span class="n">value</span> <span class="k">else</span> <span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">,</span><span class="s1">&#39;B&#39;</span><span class="p">])})</span>
                <span class="n">fig_data</span> <span class="o">=</span> <span class="n">ip</span><span class="o">.</span><span class="n">plotly_rgb_lines</span><span class="p">(</span><span class="n">path_evr</span><span class="o">=</span><span class="n">evr</span><span class="p">,</span><span class="o">**</span><span class="n">argdict</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">fig_data</span> <span class="o">=</span> <span class="n">ip</span><span class="o">.</span><span class="n">plotly_dos_lines</span><span class="p">(</span><span class="n">path_evr</span><span class="o">=</span><span class="n">evr</span><span class="p">,</span><span class="o">**</span><span class="n">argdict</span><span class="p">)</span>
            <span class="n">tab</span><span class="o">.</span><span class="n">selected_index</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">with</span> <span class="n">fig</span><span class="o">.</span><span class="n">batch_animate</span><span class="p">():</span>
                <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">fig_data</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
                    <span class="n">fig</span><span class="o">.</span><span class="n">add_trace</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">fig_data</span><span class="o">.</span><span class="n">layout</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">update_layout</span><span class="p">(</span><span class="n">template</span><span class="o">=</span><span class="n">style_w</span><span class="o">.</span><span class="n">value</span><span class="p">)</span> <span class="c1"># Also here</span>
            <span class="n">dict_html</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">argdict</span><span class="p">)</span>  <span class="c1"># Save for later generation.</span>
            <span class="n">click_data</span><span class="p">(</span><span class="n">sel_en_w</span><span class="p">,</span><span class="n">fermi_w</span><span class="p">,</span><span class="n">tabel_w</span><span class="p">,</span><span class="n">fig</span><span class="p">)</span>

        <span class="c1"># end of function</span>
    <span class="n">graph_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">update_graph</span><span class="p">)</span>

    <span class="c1"># Display few good things in output.</span>
    <span class="nd">@out_tab</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">clear_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">show_args</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;path = &#39;</span><span class="si">{}</span><span class="s2">&#39;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">out_w1</span><span class="o">.</span><span class="n">value</span><span class="p">))</span>
            <span class="n">_str_out</span> <span class="o">=</span> <span class="s2">&quot;args_dict = dict(&quot;</span>
            <span class="k">for</span> <span class="n">k</span><span class="p">,</span><span class="n">v</span> <span class="ow">in</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">dict_html</span><span class="o">.</span><span class="n">value</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">_str_out</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">            </span><span class="si">{}</span><span class="s2"> = </span><span class="si">{}</span><span class="s2">,&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">v</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">_str_out</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">            )&quot;</span><span class="p">)</span>

    <span class="n">dict_html</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">show_args</span><span class="p">,</span><span class="s1">&#39;value&#39;</span><span class="p">)</span> <span class="c1"># change takes place after graph update</span>
    <span class="c1"># Open fig in large window</span>
    <span class="n">expand_w</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">icon</span> <span class="o">=</span> <span class="s2">&quot;fa-expand&quot;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">l_btn</span><span class="p">)</span>
    <span class="n">top_right</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="o">*</span><span class="n">top_right</span><span class="o">.</span><span class="n">children</span><span class="p">,</span><span class="n">expand_w</span><span class="p">]</span>
    <span class="nd">@out_tab</span><span class="o">.</span><span class="n">capture</span><span class="p">(</span><span class="n">clear_output</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">wait</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">expand_fig</span><span class="p">(</span><span class="n">btn</span><span class="p">):</span>
        <span class="n">tab</span><span class="o">.</span><span class="n">selected_index</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="n">sel_en_w</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="s1">&#39;None&#39;</span>
        <span class="n">display</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
    <span class="n">expand_w</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">expand_fig</span><span class="p">)</span>

    <span class="n">style_w</span><span class="o">.</span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;plotly&#39;</span> <span class="c1"># to trigger callback and resize graph</span>
    <span class="n">intro_html</span> <span class="o">=</span> <span class="n">ipw</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s2">&quot;&lt;h2&gt;Pivotpy&lt;/h2&gt;&lt;p&gt;Filter files here and switch tab to Graphs. You can create cache ahead of time to load quickly while working. If anything does not seem to work, see the error in STD(out/err) tab. For large files, do `Export-VR(or Vasprun)` in Powershell to access fast.&lt;/p&gt;&lt;marquee style=&#39;color:red&#39;&gt;Pivotpy GUI based on ipywidgets!&lt;/marquee&gt;&quot;</span><span class="p">)</span>
    <span class="n">header_box</span> <span class="o">=</span> <span class="n">HBox</span><span class="p">([</span><span class="n">intro_html</span><span class="p">,</span><span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Theme:&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;80px&#39;</span><span class="p">)),</span><span class="n">theme_w</span>
                    <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span>
    <span class="n">summary_gui</span> <span class="o">=</span> <span class="n">HBox</span><span class="p">([</span><span class="n">Label</span><span class="p">(),</span><span class="n">summary_btn</span><span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span>
    <span class="n">intro_box</span> <span class="o">=</span> <span class="n">VBox</span><span class="p">([</span><span class="n">header_box</span><span class="p">,</span><span class="n">gui1</span><span class="p">,</span><span class="n">summary_gui</span><span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span>
    <span class="n">tab</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">intro_box</span><span class="p">,</span>
                    <span class="n">HBox</span><span class="p">([</span><span class="n">theme_html</span><span class="p">,</span>
                          <span class="n">left_box</span><span class="p">,</span>
                          <span class="n">right_box</span>
                        <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">),</span>
                    <span class="n">VBox</span><span class="p">([</span><span class="n">HBox</span><span class="p">([</span>
                        <span class="n">ipw</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;h2&gt;Errors/Generted Code is Captured Here&lt;/h2&gt;&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;85%&#39;</span><span class="p">)),</span>
                        <span class="n">Label</span><span class="p">(</span><span class="s1">&#39;Theme:&#39;</span><span class="p">,</span><span class="n">layout</span><span class="o">=</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s1">&#39;50px&#39;</span><span class="p">)),</span>
                        <span class="n">theme_w</span>
                        <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">),</span>
                        <span class="n">out_tab</span>
                        <span class="p">])</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;marginless&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">add_class</span><span class="p">(</span><span class="s1">&#39;borderless&#39;</span><span class="p">)</span>
                    <span class="p">]</span>
    <span class="k">return</span> <span class="n">tab</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Abdul Saboor

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>